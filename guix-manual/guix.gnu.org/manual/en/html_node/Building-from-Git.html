<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--   Copyright (C) 2012-2022 Ludovic Courtès

Copyright (C) 2013, 2014, 2016 Andreas Enge

Copyright (C) 2013 Nikita Karetnikov

Copyright (C) 2014, 2015, 2016 Alex Kost

Copyright (C) 2015, 2016 Mathieu Lirzin

Copyright (C) 2014 Pierre-Antoine Rault

Copyright (C) 2015 Taylan Ulrich Bayırlı/Kammer

Copyright (C) 2015, 2016, 2017, 2019, 2020, 2021 Leo Famulari

Copyright (C) 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022 Ricardo Wurmus

Copyright (C) 2016 Ben Woodcroft

Copyright (C) 2016, 2017, 2018, 2021 Chris Marusich

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021, 2022 Efraim Flashner

Copyright (C) 2016 John Darrington

Copyright (C) 2016, 2017 Nikita Gillmann

Copyright (C) 2016, 2017, 2018, 2019, 2020 Jan Nieuwenhuizen

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021 Julien Lepiller

Copyright (C) 2016 Alex ter Weele

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021 Christopher Baines

Copyright (C) 2017, 2018, 2019 Clément Lassieur

Copyright (C) 2017, 2018, 2020, 2021, 2022 Mathieu Othacehe

Copyright (C) 2017 Federico Beffa

Copyright (C) 2017, 2018 Carlo Zancanaro

Copyright (C) 2017 Thomas Danckaert

Copyright (C) 2017 humanitiesNerd

Copyright (C) 2017, 2021 Christine Lemmer-Webber

Copyright (C) 2017, 2018, 2019, 2020, 2021, 2022 Marius Bakke

Copyright (C) 2017, 2019, 2020, 2022 Hartmut Goebel

Copyright (C) 2017, 2019, 2020, 2021, 2022 Maxim Cournoyer

Copyright (C) 2017–2022 Tobias Geerinckx-Rice

Copyright (C) 2017 George Clemmer

Copyright (C) 2017 Andy Wingo

Copyright (C) 2017, 2018, 2019, 2020 Arun Isaac

Copyright (C) 2017 nee

Copyright (C) 2018 Rutger Helling

Copyright (C) 2018, 2021 Oleg Pykhalov

Copyright (C) 2018 Mike Gerwitz

Copyright (C) 2018 Pierre-Antoine Rouby

Copyright (C) 2018, 2019 Gábor Boskovits

Copyright (C) 2018, 2019, 2020, 2022 Florian Pelz

Copyright (C) 2018 Laura Lazzati

Copyright (C) 2018 Alex Vong

Copyright (C) 2019 Josh Holland

Copyright (C) 2019, 2020 Diego Nicola Barbato

Copyright (C) 2019 Ivan Petkov

Copyright (C) 2019 Jakob L. Kreuze

Copyright (C) 2019 Kyle Andrews

Copyright (C) 2019 Alex Griffin

Copyright (C) 2019, 2020, 2021, 2022 Guillaume Le Vaillant

Copyright (C) 2020 Liliana Marie Prikler

Copyright (C) 2019, 2020, 2021, 2022 Simon Tournier

Copyright (C) 2020 Wiktor Żelazny

Copyright (C) 2020 Damien Cassou

Copyright (C) 2020 Jakub Kądziołka

Copyright (C) 2020 Jack Hill

Copyright (C) 2020 Naga Malleswari

Copyright (C) 2020, 2021 Brice Waegeneire

Copyright (C) 2020 R Veera Kumar

Copyright (C) 2020, 2021 Pierre Langlois

Copyright (C) 2020 pinoaffe

Copyright (C) 2020 André Batista

Copyright (C) 2020, 2021 Alexandru-Sergiu Marton

Copyright (C) 2020 raingloom

Copyright (C) 2020 Daniel Brooks

Copyright (C) 2020 John Soo

Copyright (C) 2020 Jonathan Brielmaier

Copyright (C) 2020 Edgar Vincent

Copyright (C) 2021, 2022 Maxime Devos

Copyright (C) 2021 B. Wilson

Copyright (C) 2021 Xinglu Chen

Copyright (C) 2021 Raghav Gururajan

Copyright (C) 2021 Domagoj Stolfa

Copyright (C) 2021 Hui Lu

Copyright (C) 2021 pukkamustard

Copyright (C) 2021 Alice Brenon

Copyright (C) 2021, 2022 Josselin Poiret

Copyright (C) 2021 muradm

Copyright (C) 2021, 2022 Andrew Tropin

Copyright (C) 2021 Sarah Morgensen

Copyright (C) 2022 Remco van 't Veer

Copyright (C) 2022 Aleksandr Vityazev

Copyright (C) 2022 Philip McGrath

Copyright (C) 2022 Karl Hallsby

Copyright (C) 2022 Justin Veilleux

Copyright (C) 2022 Reily Siegel

Copyright (C) 2022 Simon Streit

Copyright (C) 2022 (

Copyright (C) 2022 John Kehayias


Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled "GNU Free
Documentation License".   -->
<!--   Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/   -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Building from Git (GNU Guix Reference Manual)</title>

<meta name="description" content="Building from Git (GNU Guix Reference Manual)" />
<meta name="keywords" content="Building from Git (GNU Guix Reference Manual)" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="Generator" content="makeinfo" />
<link href="index.html" rel="start" title="Top" />
<link href="Concept-Index.html" rel="index" title="Concept Index" />
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents" />
<link href="Contributing.html" rel="up" title="Contributing" />
<link href="Running-Guix-Before-It-Is-Installed.html" rel="next" title="Running Guix Before It Is Installed" />
<link href="Contributing.html" rel="prev" title="Contributing" />
<style type="text/css">
&amp;lt;!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
--&amp;gt;
</style>
<link rel="stylesheet" type="text/css" href="https://www.gnu.org/software/gnulib/manual.css" />

<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" type="text/css" href="../../../static/base/css/manual.css" /><link rel="stylesheet" type="text/css" href="../../../static/base/css/code.css" /></head>

<body lang="en"><header class="navbar"><h1><a class="branding" href="https://guix.gnu.org/manual/en/"></a></h1><nav class="navbar-menu"><input class="navbar-menu-hidden-input" type="radio" name="dropdown" id="all-dropdowns-hidden" /><ul><li class="navbar-menu-item dropdown dropdown-btn"><input class="navbar-menu-hidden-input" type="radio" name="dropdown" id="visible-dropdown" /><label for="visible-dropdown"><img alt="Language" src="../../../static/base/img/language-picker.svg" /></label><label for="all-dropdowns-hidden"><img alt="Language" src="../../../static/base/img/language-picker.svg" /></label><div class="navbar-submenu" id="navbar-submenu"><div class="navbar-submenu-triangle"> </div><ul><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/de/html_node">Deutsch</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/en/html_node">English</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/es/html_node">Español</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/fr/html_node">français</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/pt-br/html_node">Português</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/ru/html_node">русский</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/zh-cn/html_node">中文</a></li><li><a class="navbar-menu-item" href="https://translate.fedoraproject.org/projects/guix/documentation-manual/">⊕</a></li></ul></div></li></ul></nav><a class="navbar-menu-btn" href="https://guix.gnu.org/manual/"></a></header>
<span id="Building-from-Git"></span><div class="header">
<p>
Next: <a href="Running-Guix-Before-It-Is-Installed.html" accesskey="n" rel="next">Running Guix Before It Is Installed</a>, Up: <a href="Contributing.html" accesskey="u" rel="up">Contributing</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr />
<span id="Building-from-Git-1"></span><h3 class="section">22.1 Building from Git</h3>

<p>If you want to hack Guix itself, it is recommended to use the latest
version from the Git repository:
</p>
<div class="example">
<pre class="example">git clone https://git.savannah.gnu.org/git/guix.git
</pre></div>

<span id="index-authentication_002c-of-a-Guix-checkout"></span>
<p>How do you ensure that you obtained a genuine copy of the repository?
To do that, run <code>guix git authenticate</code>, passing it the commit
and OpenPGP fingerprint of the <em>channel introduction</em>
(see <a href="Invoking-guix-git-authenticate.html">Invoking guix git authenticate</a>):
</p>
<div class="example">
<pre class="example">git fetch origin keyring:keyring
guix git authenticate 9edb3f66fd807b096b48283debdcddccfea34bad \
  "BBB0 2DDF 2CEA F6A8 0D1D  E643 A2A0 6DF2 A33A 54FA"
</pre></div>

<p>This command completes with exit code zero on success; it prints an
error message and exits with a non-zero code otherwise.
</p>
<p>As you can see, there is a chicken-and-egg problem: you first need to
have Guix installed.  Typically you would install Guix System
(see <a href="System-Installation.html">System Installation</a>) or Guix on top of another distro
(see <a href="Binary-Installation.html">Binary Installation</a>); in either case, you would verify the
OpenPGP signature on the installation medium.  This &ldquo;bootstraps&rdquo; the
trust chain.
</p>
<p>The easiest way to set up a development environment for Guix is, of
course, by using Guix!  The following command starts a new shell where
all the dependencies and appropriate environment variables are set up to
hack on Guix:
</p>
<div class="example">
<pre class="example">guix shell -D guix --pure
</pre></div>

<p>See <a href="Invoking-guix-shell.html">Invoking guix shell</a>, for more information on that command.
</p>
<p>If you are unable to use Guix when building Guix from a checkout, the
following are the required packages in addition to those mentioned in the
installation instructions (see <a href="Requirements.html">Requirements</a>).
</p>
<ul>
<li> <a href="https://gnu.org/software/autoconf/">GNU Autoconf</a>;
</li><li> <a href="https://gnu.org/software/automake/">GNU Automake</a>;
</li><li> <a href="https://gnu.org/software/gettext/">GNU Gettext</a>;
</li><li> <a href="https://gnu.org/software/texinfo/">GNU Texinfo</a>;
</li><li> <a href="https://www.graphviz.org/">Graphviz</a>;
</li><li> <a href="https://www.gnu.org/software/help2man/">GNU Help2man (optional)</a>.
</li></ul>

<p>On Guix, extra dependencies can be added by instead running <code>guix
shell</code>:
</p>
<div class="example">
<pre class="example">guix shell -D guix help2man git strace --pure
</pre></div>

<p>From there you can generate the build system infrastructure
using Autoconf and Automake:
</p>
<div class="example">
<pre class="example">./bootstrap
</pre></div>

<p>If you get an error like this one:
</p>
<div class="example">
<pre class="example">configure.ac:46: error: possibly undefined macro: PKG_CHECK_MODULES
</pre></div>

<p>it probably means that Autoconf couldn’t find <samp>pkg.m4</samp>, which is
provided by pkg-config.  Make sure that <samp>pkg.m4</samp> is available.  The
same holds for the <samp>guile.m4</samp> set of macros provided by Guile.  For
instance, if you installed Automake in <samp>/usr/local</samp>, it wouldn’t
look for <samp>.m4</samp> files in <samp>/usr/share</samp>.  In that case, you have
to invoke the following command:
</p>
<div class="example">
<pre class="example">export ACLOCAL_PATH=/usr/share/aclocal
</pre></div>

<p>See <a href="https://www.gnu.org/software/automake/manual/html_node/Macro-Search-Path.html#Macro-Search-Path">Macro Search Path</a> in <cite>The GNU Automake Manual</cite>, for
more information.
</p>
<p>Then, run:
</p>
<div class="example">
<pre class="example">./configure --localstatedir=/var
</pre></div>

<p>... where <samp>/var</samp> is the normal <code>localstatedir</code> value
(see <a href="The-Store.html">The Store</a>, for information about this).  Note that you will
probably not run <code>make install</code> at the end (you don&rsquo;t have to)
but it&rsquo;s still important to pass the right <code>localstatedir</code>.
</p>
<p>Finally, you can build Guix and, if you feel so inclined, run the tests
(see <a href="Running-the-Test-Suite.html">Running the Test Suite</a>):
</p>
<div class="example">
<pre class="example">make
make check
</pre></div>

<p>If anything fails, take a look at installation instructions
(see <a href="Installation.html">Installation</a>) or send a message to the
<a href="mailto:guix-devel@gnu.org">mailing list</a>.
</p>
<p>From there on, you can authenticate all the commits included in your
checkout by running:
</p>
<div class="example">
<pre class="example">make authenticate
</pre></div>

<p>The first run takes a couple of minutes, but subsequent runs are faster.
</p>
<p>Or, when your configuration for your local Git repository doesn&rsquo;t match
the default one, you can provide the reference for the <code>keyring</code>
branch through the variable <code>GUIX_GIT_KEYRING</code>.  The following
example assumes that you have a Git remote called &lsquo;<samp>myremote</samp>&rsquo;
pointing to the official repository:
</p>
<div class="example">
<pre class="example">make authenticate GUIX_GIT_KEYRING=myremote/keyring
</pre></div>

<blockquote>
<p><b>Note:</b> You are advised to run <code>make authenticate</code> after every
<code>git pull</code> invocation.  This ensures you keep receiving valid
changes to the repository.
</p></blockquote>

<p>After updating the repository, <code>make</code> might fail with an error
similar to the following example:
</p>
<div class="example">
<pre class="example">error: failed to load 'gnu/packages/dunst.scm':
ice-9/eval.scm:293:34: In procedure abi-check: #&lt;record-type &lt;origin&gt;&gt;: record ABI mismatch; recompilation needed
</pre></div>

<p>This means that one of the record types that Guix defines (in this
example, the <code>origin</code> record) has changed, and all of guix needs
to be recompiled to take that change into account.  To do so, run
<code>make clean-go</code> followed by <code>make</code>.
</p>
<hr />
<div class="header">
<p>
Next: <a href="Running-Guix-Before-It-Is-Installed.html" accesskey="n" rel="next">Running Guix Before It Is Installed</a>, Up: <a href="Contributing.html" accesskey="u" rel="up">Contributing</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
