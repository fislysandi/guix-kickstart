<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--   Copyright (C) 2012-2022 Ludovic Courtès

Copyright (C) 2013, 2014, 2016 Andreas Enge

Copyright (C) 2013 Nikita Karetnikov

Copyright (C) 2014, 2015, 2016 Alex Kost

Copyright (C) 2015, 2016 Mathieu Lirzin

Copyright (C) 2014 Pierre-Antoine Rault

Copyright (C) 2015 Taylan Ulrich Bayırlı/Kammer

Copyright (C) 2015, 2016, 2017, 2019, 2020, 2021 Leo Famulari

Copyright (C) 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022 Ricardo Wurmus

Copyright (C) 2016 Ben Woodcroft

Copyright (C) 2016, 2017, 2018, 2021 Chris Marusich

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021, 2022 Efraim Flashner

Copyright (C) 2016 John Darrington

Copyright (C) 2016, 2017 Nikita Gillmann

Copyright (C) 2016, 2017, 2018, 2019, 2020 Jan Nieuwenhuizen

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021 Julien Lepiller

Copyright (C) 2016 Alex ter Weele

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021 Christopher Baines

Copyright (C) 2017, 2018, 2019 Clément Lassieur

Copyright (C) 2017, 2018, 2020, 2021, 2022 Mathieu Othacehe

Copyright (C) 2017 Federico Beffa

Copyright (C) 2017, 2018 Carlo Zancanaro

Copyright (C) 2017 Thomas Danckaert

Copyright (C) 2017 humanitiesNerd

Copyright (C) 2017, 2021 Christine Lemmer-Webber

Copyright (C) 2017, 2018, 2019, 2020, 2021, 2022 Marius Bakke

Copyright (C) 2017, 2019, 2020, 2022 Hartmut Goebel

Copyright (C) 2017, 2019, 2020, 2021, 2022 Maxim Cournoyer

Copyright (C) 2017–2022 Tobias Geerinckx-Rice

Copyright (C) 2017 George Clemmer

Copyright (C) 2017 Andy Wingo

Copyright (C) 2017, 2018, 2019, 2020 Arun Isaac

Copyright (C) 2017 nee

Copyright (C) 2018 Rutger Helling

Copyright (C) 2018, 2021 Oleg Pykhalov

Copyright (C) 2018 Mike Gerwitz

Copyright (C) 2018 Pierre-Antoine Rouby

Copyright (C) 2018, 2019 Gábor Boskovits

Copyright (C) 2018, 2019, 2020, 2022 Florian Pelz

Copyright (C) 2018 Laura Lazzati

Copyright (C) 2018 Alex Vong

Copyright (C) 2019 Josh Holland

Copyright (C) 2019, 2020 Diego Nicola Barbato

Copyright (C) 2019 Ivan Petkov

Copyright (C) 2019 Jakob L. Kreuze

Copyright (C) 2019 Kyle Andrews

Copyright (C) 2019 Alex Griffin

Copyright (C) 2019, 2020, 2021, 2022 Guillaume Le Vaillant

Copyright (C) 2020 Liliana Marie Prikler

Copyright (C) 2019, 2020, 2021, 2022 Simon Tournier

Copyright (C) 2020 Wiktor Żelazny

Copyright (C) 2020 Damien Cassou

Copyright (C) 2020 Jakub Kądziołka

Copyright (C) 2020 Jack Hill

Copyright (C) 2020 Naga Malleswari

Copyright (C) 2020, 2021 Brice Waegeneire

Copyright (C) 2020 R Veera Kumar

Copyright (C) 2020, 2021 Pierre Langlois

Copyright (C) 2020 pinoaffe

Copyright (C) 2020 André Batista

Copyright (C) 2020, 2021 Alexandru-Sergiu Marton

Copyright (C) 2020 raingloom

Copyright (C) 2020 Daniel Brooks

Copyright (C) 2020 John Soo

Copyright (C) 2020 Jonathan Brielmaier

Copyright (C) 2020 Edgar Vincent

Copyright (C) 2021, 2022 Maxime Devos

Copyright (C) 2021 B. Wilson

Copyright (C) 2021 Xinglu Chen

Copyright (C) 2021 Raghav Gururajan

Copyright (C) 2021 Domagoj Stolfa

Copyright (C) 2021 Hui Lu

Copyright (C) 2021 pukkamustard

Copyright (C) 2021 Alice Brenon

Copyright (C) 2021, 2022 Josselin Poiret

Copyright (C) 2021 muradm

Copyright (C) 2021, 2022 Andrew Tropin

Copyright (C) 2021 Sarah Morgensen

Copyright (C) 2022 Remco van 't Veer

Copyright (C) 2022 Aleksandr Vityazev

Copyright (C) 2022 Philip McGrath

Copyright (C) 2022 Karl Hallsby

Copyright (C) 2022 Justin Veilleux

Copyright (C) 2022 Reily Siegel

Copyright (C) 2022 Simon Streit

Copyright (C) 2022 (

Copyright (C) 2022 John Kehayias


Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled "GNU Free
Documentation License".   -->
<!--   Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/   -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Package Transformation Options (GNU Guix Reference Manual)</title>

<meta name="description" content="Package Transformation Options (GNU Guix Reference Manual)" />
<meta name="keywords" content="Package Transformation Options (GNU Guix Reference Manual)" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="Generator" content="makeinfo" />
<link href="index.html" rel="start" title="Top" />
<link href="Concept-Index.html" rel="index" title="Concept Index" />
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents" />
<link href="Invoking-guix-build.html" rel="up" title="Invoking guix build" />
<link href="Additional-Build-Options.html" rel="next" title="Additional Build Options" />
<link href="Common-Build-Options.html" rel="prev" title="Common Build Options" />
<style type="text/css">
&amp;lt;!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
--&amp;gt;
</style>
<link rel="stylesheet" type="text/css" href="https://www.gnu.org/software/gnulib/manual.css" />

<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" type="text/css" href="../../../static/base/css/manual.css" /><link rel="stylesheet" type="text/css" href="../../../static/base/css/code.css" /></head>

<body lang="en"><header class="navbar"><h1><a class="branding" href="https://guix.gnu.org/manual/en/"></a></h1><nav class="navbar-menu"><input class="navbar-menu-hidden-input" type="radio" name="dropdown" id="all-dropdowns-hidden" /><ul><li class="navbar-menu-item dropdown dropdown-btn"><input class="navbar-menu-hidden-input" type="radio" name="dropdown" id="visible-dropdown" /><label for="visible-dropdown"><img alt="Language" src="../../../static/base/img/language-picker.svg" /></label><label for="all-dropdowns-hidden"><img alt="Language" src="../../../static/base/img/language-picker.svg" /></label><div class="navbar-submenu" id="navbar-submenu"><div class="navbar-submenu-triangle"> </div><ul><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/de/html_node">Deutsch</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/en/html_node">English</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/es/html_node">Español</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/fr/html_node">français</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/pt-br/html_node">Português</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/ru/html_node">русский</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/zh-cn/html_node">中文</a></li><li><a class="navbar-menu-item" href="https://translate.fedoraproject.org/projects/guix/documentation-manual/">⊕</a></li></ul></div></li></ul></nav><a class="navbar-menu-btn" href="https://guix.gnu.org/manual/"></a></header>
<span id="Package-Transformation-Options"></span><div class="header">
<p>
Next: <a href="Additional-Build-Options.html" accesskey="n" rel="next">Additional Build Options</a>, Previous: <a href="Common-Build-Options.html" accesskey="p" rel="prev">Common Build Options</a>, Up: <a href="Invoking-guix-build.html" accesskey="u" rel="up">Invoking guix build</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr />
<span id="Package-Transformation-Options-1"></span><h4 class="subsection">10.1.2 Package Transformation Options</h4>

<span id="index-package-variants"></span>
<p>Another set of command-line options supported by <code>guix build</code>
and also <code>guix package</code> are <em>package transformation
options</em>.  These are options that make it possible to define <em>package
variants</em>&mdash;for instance, packages built from different source code.
This is a convenient way to create customized packages on the fly
without having to type in the definitions of package variants
(see <a href="Defining-Packages.html">Defining Packages</a>).
</p>
<p>Package transformation options are preserved across upgrades:
<code>guix upgrade</code> attempts to apply transformation options
initially used when creating the profile to the upgraded packages.
</p>
<p>The available options are listed below.  Most commands support them and
also support a <samp>--help-transform</samp> option that lists all the
available options and a synopsis (these options are not shown in the
<samp>--help</samp> output for brevity).
</p>
<dl compact="compact">
<dd>
<span id="index-performance_002c-tuning-code"></span>
<span id="index-optimization_002c-of-package-code"></span>
<span id="index-tuning_002c-of-package-code"></span>
<span id="index-SIMD-support"></span>
<span id="index-tunable-packages"></span>
<span id="index-package-multi_002dversioning"></span>
</dd>
<dt><code>--tune[=<var>cpu</var>]</code></dt>
<dd><p>Use versions of the packages marked as &ldquo;tunable&rdquo; optimized for
<var>cpu</var>.  When <var>cpu</var> is <code>native</code>, or when it is omitted, tune
for the CPU on which the <code>guix</code> command is running.
</p>
<p>Valid <var>cpu</var> names are those recognized by the underlying compiler,
by default the GNU Compiler Collection.  On x86_64 processors, this
includes CPU names such as <code>nehalem</code>, <code>haswell</code>, and
<code>skylake</code> (see <a href="https://gcc.gnu.org/onlinedocs/gcc/x86-Options.html#x86-Options"><code>-march</code></a> in <cite>Using the GNU
Compiler Collection (GCC)</cite>).
</p>
<p>As new generations of CPUs come out, they augment the standard
instruction set architecture (ISA) with additional instructions, in
particular instructions for single-instruction/multiple-data (SIMD)
parallel processing.  For example, while Core2 and Skylake CPUs both
implement the x86_64 ISA, only the latter supports AVX2 SIMD
instructions.
</p>
<p>The primary gain one can expect from <samp>--tune</samp> is for programs
that can make use of those SIMD capabilities <em>and</em> that do not
already have a mechanism to select the right optimized code at run time.
Packages that have the <code>tunable?</code> property set are considered
<em>tunable packages</em> by the <samp>--tune</samp> option; a package
definition with the property set looks like this:
</p>
<div class="lisp">
<pre class="lisp"><span class="syntax-paren0">(<span class="syntax-symbol"><a class="syntax-symbol" href="package-Reference.html#index-package">package</a>
  <span class="syntax-paren1">(<span class="syntax-symbol"><span class="syntax-symbol">name</span> <span class="syntax-string">"hello-simd"</span></span>)</span>
  <span class="syntax-comment">;; ...
</span>
  <span class="syntax-comment">;; This package may benefit from SIMD extensions so
</span>  <span class="syntax-comment">;; mark it as "tunable".
</span>  <span class="syntax-paren1">(<span class="syntax-symbol"><span class="syntax-symbol">properties</span> <span class="syntax-symbol">'</span><span class="syntax-paren2">(<span class="syntax-symbol"><span class="syntax-paren3">(<span class="syntax-symbol"><span class="syntax-symbol">tunable?</span> <span class="syntax-symbol">.</span> <span class="syntax-symbol">#t</span></span>)</span></span>)</span></span>)</span></span>)</span>
</pre></div>

<p>Other packages are not considered tunable.  This allows Guix to use
generic binaries in the cases where tuning for a specific CPU is
unlikely to provide any gain.
</p>
<p>Tuned packages are built with <code>-march=<var>CPU</var></code>; under the hood,
the <samp>-march</samp> option is passed to the actual wrapper by a compiler
wrapper.  Since the build machine may not be able to run code for the
target CPU micro-architecture, the test suite is not run when building a
tuned package.
</p>
<p>To reduce rebuilds to the minimum, tuned packages are <em>grafted</em>
onto packages that depend on them (see <a href="Security-Updates.html">grafts</a>).
Thus, using <samp>--no-grafts</samp> cancels the effect of <samp>--tune</samp>.
</p>
<p>We call this technique <em>package multi-versioning</em>: several variants
of tunable packages may be built, one for each CPU variant.  It is the
coarse-grain counterpart of <em>function multi-versioning</em> as
implemented by the GNU tool chain (see <a href="https://gcc.gnu.org/onlinedocs/gcc/Function-Multiversioning.html#Function-Multiversioning">Function Multiversioning</a> in <cite>Using the GNU Compiler Collection (GCC)</cite>).
</p>
</dd>
<dt><code>--with-source=<var>source</var></code></dt>
<dt><code>--with-source=<var>package</var>=<var>source</var></code></dt>
<dt><code>--with-source=<var>package</var>@<var>version</var>=<var>source</var></code></dt>
<dd><p>Use <var>source</var> as the source of <var>package</var>, and <var>version</var> as
its version number.
<var>source</var> must be a file name or a URL, as for <code>guix
download</code> (see <a href="Invoking-guix-download.html">Invoking guix download</a>).
</p>
<p>When <var>package</var> is omitted,
it is taken to be the package name specified on the
command line that matches the base of <var>source</var>&mdash;e.g.,
if <var>source</var> is <code>/src/guile-2.0.10.tar.gz</code>, the corresponding
package is <code>guile</code>.
</p>
<p>Likewise, when <var>version</var> is omitted, the version string is inferred from
<var>source</var>; in the previous example, it is <code>2.0.10</code>.
</p>
<p>This option allows users to try out versions of packages other than the
one provided by the distribution.  The example below downloads
<samp>ed-1.7.tar.gz</samp> from a GNU mirror and uses that as the source for
the <code>ed</code> package:
</p>
<div class="example">
<pre class="example">guix build ed --with-source=mirror://gnu/ed/ed-1.4.tar.gz
</pre></div>

<p>As a developer, <samp>--with-source</samp> makes it easy to test release
candidates, and even to test their impact on packages that depend on
them:
</p>
<div class="example">
<pre class="example">guix build elogind --with-source=&hellip;/shepherd-0.9.0rc1.tar.gz 
</pre></div>

<p>&hellip; or to build from a checkout in a pristine environment:
</p>
<div class="example">
<pre class="example">$ git clone git://git.sv.gnu.org/guix.git
$ guix build guix --with-source=guix@1.0=./guix
</pre></div>

</dd>
<dt><code>--with-input=<var>package</var>=<var>replacement</var></code></dt>
<dd><p>Replace dependency on <var>package</var> by a dependency on
<var>replacement</var>.  <var>package</var> must be a package name, and
<var>replacement</var> must be a package specification such as <code>guile</code>
or <code>guile@1.8</code>.
</p>
<p>For instance, the following command builds Guix, but replaces its
dependency on the current stable version of Guile with a dependency on
the legacy version of Guile, <code>guile@2.0</code>:
</p>
<div class="example">
<pre class="example">guix build --with-input=guile=guile@2.0 guix
</pre></div>

<p>This is a recursive, deep replacement.  So in this example, both
<code>guix</code> and its dependency <code>guile-json</code> (which also depends on
<code>guile</code>) get rebuilt against <code>guile@2.0</code>.
</p>
<p>This is implemented using the <code>package-input-rewriting</code> Scheme
procedure (see <a href="Defining-Packages.html"><code>package-input-rewriting</code></a>).
</p>
</dd>
<dt><code>--with-graft=<var>package</var>=<var>replacement</var></code></dt>
<dd><p>This is similar to <samp>--with-input</samp> but with an important difference:
instead of rebuilding the whole dependency chain, <var>replacement</var> is
built and then <em>grafted</em> onto the binaries that were initially
referring to <var>package</var>.  See <a href="Security-Updates.html">Security Updates</a>, for more
information on grafts.
</p>
<p>For example, the command below grafts version 3.5.4 of GnuTLS onto Wget
and all its dependencies, replacing references to the version of GnuTLS
they currently refer to:
</p>
<div class="example">
<pre class="example">guix build --with-graft=gnutls=gnutls@3.5.4 wget
</pre></div>

<p>This has the advantage of being much faster than rebuilding everything.
But there is a caveat: it works if and only if <var>package</var> and
<var>replacement</var> are strictly compatible&mdash;for example, if they provide
a library, the application binary interface (ABI) of those libraries
must be compatible.  If <var>replacement</var> is somehow incompatible with
<var>package</var>, then the resulting package may be unusable.  Use with
care!
</p>
<span id="index-debugging-info_002c-rebuilding"></span>
</dd>
<dt><code>--with-debug-info=<var>package</var></code></dt>
<dd><p>Build <var>package</var> in a way that preserves its debugging info and graft
it onto packages that depend on it.  This is useful if <var>package</var>
does not already provide debugging info as a <code>debug</code> output
(see <a href="Installing-Debugging-Files.html">Installing Debugging Files</a>).
</p>
<p>For example, suppose you&rsquo;re experiencing a crash in Inkscape and would
like to see what&rsquo;s up in GLib, a library deep down in Inkscape&rsquo;s
dependency graph.  GLib lacks a <code>debug</code> output, so debugging is
tough.  Fortunately, you rebuild GLib with debugging info and tack it on
Inkscape:
</p>
<div class="example">
<pre class="example">guix install inkscape --with-debug-info=glib
</pre></div>

<p>Only GLib needs to be recompiled so this takes a reasonable amount of
time.  See <a href="Installing-Debugging-Files.html">Installing Debugging Files</a>, for more info.
</p>
<blockquote>
<p><b>Note:</b> Under the hood, this option works by passing the &lsquo;<samp>#:strip-binaries?
#f</samp>&rsquo; to the build system of the package of interest (see <a href="Build-Systems.html">Build Systems</a>).  Most build systems support that option but some do not.  In
that case, an error is raised.
</p>
<p>Likewise, if a C/C++ package is built without <code>-g</code> (which is rarely
the case), debugging info will remain unavailable even when
<code>#:strip-binaries?</code> is false.
</p></blockquote>

<span id="index-tool-chain_002c-changing-the-build-tool-chain-of-a-package"></span>
</dd>
<dt><code>--with-c-toolchain=<var>package</var>=<var>toolchain</var></code></dt>
<dd><p>This option changes the compilation of <var>package</var> and everything that
depends on it so that they get built with <var>toolchain</var> instead of the
default GNU tool chain for C/C++.
</p>
<p>Consider this example:
</p>
<div class="example">
<pre class="example">guix build octave-cli \
  --with-c-toolchain=fftw=gcc-toolchain@10 \
  --with-c-toolchain=fftwf=gcc-toolchain@10
</pre></div>

<p>The command above builds a variant of the <code>fftw</code> and <code>fftwf</code>
packages using version 10 of <code>gcc-toolchain</code> instead of the default
tool chain, and then builds a variant of the GNU&nbsp;Octave
command-line interface using them.  GNU&nbsp;Octave itself is also built
with <code>gcc-toolchain@10</code>.
</p>
<p>This other example builds the Hardware Locality (<code>hwloc</code>) library
and its dependents up to <code>intel-mpi-benchmarks</code> with the Clang C
compiler:
</p>
<div class="example">
<pre class="example">guix build --with-c-toolchain=hwloc=clang-toolchain \
           intel-mpi-benchmarks
</pre></div>

<blockquote>
<p><b>Note:</b> There can be application binary interface (ABI) incompatibilities among
tool chains.  This is particularly true of the C++ standard library and
run-time support libraries such as that of OpenMP.  By rebuilding all
dependents with the same tool chain, <samp>--with-c-toolchain</samp> minimizes
the risks of incompatibility but cannot entirely eliminate them.  Choose
<var>package</var> wisely.
</p></blockquote>

</dd>
<dt><code>--with-git-url=<var>package</var>=<var>url</var></code></dt>
<dd><span id="index-Git_002c-using-the-latest-commit"></span>
<span id="index-latest-commit_002c-building"></span>
<p>Build <var>package</var> from the latest commit of the <code>master</code> branch of the
Git repository at <var>url</var>.  Git sub-modules of the repository are fetched,
recursively.
</p>
<p>For example, the following command builds the NumPy Python library against the
latest commit of the master branch of Python itself:
</p>
<div class="example">
<pre class="example">guix build python-numpy \
  --with-git-url=python=https://github.com/python/cpython
</pre></div>

<p>This option can also be combined with <samp>--with-branch</samp> or
<samp>--with-commit</samp> (see below).
</p>
<span id="index-continuous-integration"></span>
<p>Obviously, since it uses the latest commit of the given branch, the result of
such a command varies over time.  Nevertheless it is a convenient way to
rebuild entire software stacks against the latest commit of one or more
packages.  This is particularly useful in the context of continuous
integration (CI).
</p>
<p>Checkouts are kept in a cache under <samp>~/.cache/guix/checkouts</samp> to speed up
consecutive accesses to the same repository.  You may want to clean it up once
in a while to save disk space.
</p>
</dd>
<dt><code>--with-branch=<var>package</var>=<var>branch</var></code></dt>
<dd><p>Build <var>package</var> from the latest commit of <var>branch</var>.  If the
<code>source</code> field of <var>package</var> is an origin with the <code>git-fetch</code>
method (see <a href="origin-Reference.html">origin Reference</a>) or a <code>git-checkout</code> object, the
repository URL is taken from that <code>source</code>.  Otherwise you have to use
<samp>--with-git-url</samp> to specify the URL of the Git repository.
</p>
<p>For instance, the following command builds <code>guile-sqlite3</code> from the
latest commit of its <code>master</code> branch, and then builds <code>guix</code> (which
depends on it) and <code>cuirass</code> (which depends on <code>guix</code>) against this
specific <code>guile-sqlite3</code> build:
</p>
<div class="example">
<pre class="example">guix build --with-branch=guile-sqlite3=master cuirass
</pre></div>

</dd>
<dt><code>--with-commit=<var>package</var>=<var>commit</var></code></dt>
<dd><p>This is similar to <samp>--with-branch</samp>, except that it builds from
<var>commit</var> rather than the tip of a branch.  <var>commit</var> must be a valid
Git commit SHA1 identifier, a tag, or a <code>git describe</code> style
identifier such as <code>1.0-3-gabc123</code>.
</p>
</dd>
<dt><code>--with-patch=<var>package</var>=<var>file</var></code></dt>
<dd><p>Add <var>file</var> to the list of patches applied to <var>package</var>, where
<var>package</var> is a spec such as <code>python@3.8</code> or <code>glibc</code>.
<var>file</var> must contain a patch; it is applied with the flags specified
in the <code>origin</code> of <var>package</var> (see <a href="origin-Reference.html">origin Reference</a>), which
by default includes <code>-p1</code> (see <a href="https://www.gnu.org/software/diffutils/manual/html_node/patch-Directories.html#patch-Directories">patch Directories</a> in <cite>Comparing and Merging Files</cite>).
</p>
<p>As an example, the command below rebuilds Coreutils with the GNU C
Library (glibc) patched with the given patch:
</p>
<div class="example">
<pre class="example">guix build coreutils --with-patch=glibc=./glibc-frob.patch
</pre></div>

<p>In this example, glibc itself as well as everything that leads to
Coreutils in the dependency graph is rebuilt.
</p>
<span id="index-upstream_002c-latest-version"></span>
</dd>
<dt><code>--with-latest=<var>package</var></code></dt>
<dd><p>So you like living on the bleeding edge?  This option is for you!  It
replaces occurrences of <var>package</var> in the dependency graph with its
latest upstream version, as reported by <code>guix refresh</code>
(see <a href="Invoking-guix-refresh.html">Invoking guix refresh</a>).
</p>
<p>It does so by determining the latest upstream release of <var>package</var>
(if possible), downloading it, and authenticating it <em>if</em> it comes
with an OpenPGP signature.
</p>
<p>As an example, the command below builds Guix against the latest version
of Guile-JSON:
</p>
<div class="example">
<pre class="example">guix build guix --with-latest=guile-json
</pre></div>

<p>There are limitations.  First, in cases where the tool cannot or does
not know how to authenticate source code, you are at risk of running
malicious code; a warning is emitted in this case.  Second, this option
simply changes the source used in the existing package definitions,
which is not always sufficient: there might be additional dependencies
that need to be added, patches to apply, and more generally the quality
assurance work that Guix developers normally do will be missing.
</p>
<p>You&rsquo;ve been warned!  In all the other cases, it&rsquo;s a snappy way to stay
on top.  We encourage you to submit patches updating the actual package
definitions once you have successfully tested an upgrade
(see <a href="Contributing.html">Contributing</a>).
</p>
<span id="index-test-suite_002c-skipping"></span>
</dd>
<dt><code>--without-tests=<var>package</var></code></dt>
<dd><p>Build <var>package</var> without running its tests.  This can be useful in
situations where you want to skip the lengthy test suite of a
intermediate package, or if a package&rsquo;s test suite fails in a
non-deterministic fashion.  It should be used with care because running
the test suite is a good way to ensure a package is working as intended.
</p>
<p>Turning off tests leads to a different store item.  Consequently, when
using this option, anything that depends on <var>package</var> must be
rebuilt, as in this example:
</p>
<div class="example">
<pre class="example">guix install --without-tests=python python-notebook
</pre></div>

<p>The command above installs <code>python-notebook</code> on top of
<code>python</code> built without running its test suite.  To do so, it also
rebuilds everything that depends on <code>python</code>, including
<code>python-notebook</code> itself.
</p>
<p>Internally, <samp>--without-tests</samp> relies on changing the
<code>#:tests?</code> option of a package&rsquo;s <code>check</code> phase (see <a href="Build-Systems.html">Build Systems</a>).  Note that some packages use a customized <code>check</code> phase
that does not respect a <code>#:tests? #f</code> setting.  Therefore,
<samp>--without-tests</samp> has no effect on these packages.
</p>
</dd>
</dl>

<p>Wondering how to achieve the same effect using Scheme code, for example
in your manifest, or how to write your own package transformation?
See <a href="Defining-Package-Variants.html">Defining Package Variants</a>, for an overview of the programming
interfaces available.
</p>
<hr />
<div class="header">
<p>
Next: <a href="Additional-Build-Options.html" accesskey="n" rel="next">Additional Build Options</a>, Previous: <a href="Common-Build-Options.html" accesskey="p" rel="prev">Common Build Options</a>, Up: <a href="Invoking-guix-build.html" accesskey="u" rel="up">Invoking guix build</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
