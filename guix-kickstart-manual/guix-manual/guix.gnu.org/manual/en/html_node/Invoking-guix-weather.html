<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--   Copyright (C) 2012-2022 Ludovic Courtès

Copyright (C) 2013, 2014, 2016 Andreas Enge

Copyright (C) 2013 Nikita Karetnikov

Copyright (C) 2014, 2015, 2016 Alex Kost

Copyright (C) 2015, 2016 Mathieu Lirzin

Copyright (C) 2014 Pierre-Antoine Rault

Copyright (C) 2015 Taylan Ulrich Bayırlı/Kammer

Copyright (C) 2015, 2016, 2017, 2019, 2020, 2021 Leo Famulari

Copyright (C) 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022 Ricardo Wurmus

Copyright (C) 2016 Ben Woodcroft

Copyright (C) 2016, 2017, 2018, 2021 Chris Marusich

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021, 2022 Efraim Flashner

Copyright (C) 2016 John Darrington

Copyright (C) 2016, 2017 Nikita Gillmann

Copyright (C) 2016, 2017, 2018, 2019, 2020 Jan Nieuwenhuizen

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021 Julien Lepiller

Copyright (C) 2016 Alex ter Weele

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021 Christopher Baines

Copyright (C) 2017, 2018, 2019 Clément Lassieur

Copyright (C) 2017, 2018, 2020, 2021, 2022 Mathieu Othacehe

Copyright (C) 2017 Federico Beffa

Copyright (C) 2017, 2018 Carlo Zancanaro

Copyright (C) 2017 Thomas Danckaert

Copyright (C) 2017 humanitiesNerd

Copyright (C) 2017, 2021 Christine Lemmer-Webber

Copyright (C) 2017, 2018, 2019, 2020, 2021, 2022 Marius Bakke

Copyright (C) 2017, 2019, 2020, 2022 Hartmut Goebel

Copyright (C) 2017, 2019, 2020, 2021, 2022 Maxim Cournoyer

Copyright (C) 2017–2022 Tobias Geerinckx-Rice

Copyright (C) 2017 George Clemmer

Copyright (C) 2017 Andy Wingo

Copyright (C) 2017, 2018, 2019, 2020 Arun Isaac

Copyright (C) 2017 nee

Copyright (C) 2018 Rutger Helling

Copyright (C) 2018, 2021 Oleg Pykhalov

Copyright (C) 2018 Mike Gerwitz

Copyright (C) 2018 Pierre-Antoine Rouby

Copyright (C) 2018, 2019 Gábor Boskovits

Copyright (C) 2018, 2019, 2020, 2022 Florian Pelz

Copyright (C) 2018 Laura Lazzati

Copyright (C) 2018 Alex Vong

Copyright (C) 2019 Josh Holland

Copyright (C) 2019, 2020 Diego Nicola Barbato

Copyright (C) 2019 Ivan Petkov

Copyright (C) 2019 Jakob L. Kreuze

Copyright (C) 2019 Kyle Andrews

Copyright (C) 2019 Alex Griffin

Copyright (C) 2019, 2020, 2021, 2022 Guillaume Le Vaillant

Copyright (C) 2020 Liliana Marie Prikler

Copyright (C) 2019, 2020, 2021, 2022 Simon Tournier

Copyright (C) 2020 Wiktor Żelazny

Copyright (C) 2020 Damien Cassou

Copyright (C) 2020 Jakub Kądziołka

Copyright (C) 2020 Jack Hill

Copyright (C) 2020 Naga Malleswari

Copyright (C) 2020, 2021 Brice Waegeneire

Copyright (C) 2020 R Veera Kumar

Copyright (C) 2020, 2021 Pierre Langlois

Copyright (C) 2020 pinoaffe

Copyright (C) 2020 André Batista

Copyright (C) 2020, 2021 Alexandru-Sergiu Marton

Copyright (C) 2020 raingloom

Copyright (C) 2020 Daniel Brooks

Copyright (C) 2020 John Soo

Copyright (C) 2020 Jonathan Brielmaier

Copyright (C) 2020 Edgar Vincent

Copyright (C) 2021, 2022 Maxime Devos

Copyright (C) 2021 B. Wilson

Copyright (C) 2021 Xinglu Chen

Copyright (C) 2021 Raghav Gururajan

Copyright (C) 2021 Domagoj Stolfa

Copyright (C) 2021 Hui Lu

Copyright (C) 2021 pukkamustard

Copyright (C) 2021 Alice Brenon

Copyright (C) 2021, 2022 Josselin Poiret

Copyright (C) 2021 muradm

Copyright (C) 2021, 2022 Andrew Tropin

Copyright (C) 2021 Sarah Morgensen

Copyright (C) 2022 Remco van 't Veer

Copyright (C) 2022 Aleksandr Vityazev

Copyright (C) 2022 Philip McGrath

Copyright (C) 2022 Karl Hallsby

Copyright (C) 2022 Justin Veilleux

Copyright (C) 2022 Reily Siegel

Copyright (C) 2022 Simon Streit

Copyright (C) 2022 (

Copyright (C) 2022 John Kehayias


Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled "GNU Free
Documentation License".   -->
<!--   Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/   -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Invoking guix weather (GNU Guix Reference Manual)</title>

<meta name="description" content="Invoking guix weather (GNU Guix Reference Manual)" />
<meta name="keywords" content="Invoking guix weather (GNU Guix Reference Manual)" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="Generator" content="makeinfo" />
<link href="index.html" rel="start" title="Top" />
<link href="Concept-Index.html" rel="index" title="Concept Index" />
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents" />
<link href="Utilities.html" rel="up" title="Utilities" />
<link href="Invoking-guix-processes.html" rel="next" title="Invoking guix processes" />
<link href="Invoking-guix-container.html" rel="prev" title="Invoking guix container" />
<style type="text/css">
&amp;lt;!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
--&amp;gt;
</style>
<link rel="stylesheet" type="text/css" href="https://www.gnu.org/software/gnulib/manual.css" />

<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" type="text/css" href="../../../static/base/css/manual.css" /><link rel="stylesheet" type="text/css" href="../../../static/base/css/code.css" /></head>

<body lang="en"><header class="navbar"><h1><a class="branding" href="https://guix.gnu.org/manual/en/"></a></h1><nav class="navbar-menu"><input class="navbar-menu-hidden-input" type="radio" name="dropdown" id="all-dropdowns-hidden" /><ul><li class="navbar-menu-item dropdown dropdown-btn"><input class="navbar-menu-hidden-input" type="radio" name="dropdown" id="visible-dropdown" /><label for="visible-dropdown"><img alt="Language" src="../../../static/base/img/language-picker.svg" /></label><label for="all-dropdowns-hidden"><img alt="Language" src="../../../static/base/img/language-picker.svg" /></label><div class="navbar-submenu" id="navbar-submenu"><div class="navbar-submenu-triangle"> </div><ul><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/de/html_node">Deutsch</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/en/html_node">English</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/es/html_node">Español</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/fr/html_node">français</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/pt-br/html_node">Português</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/ru/html_node">русский</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/zh-cn/html_node">中文</a></li><li><a class="navbar-menu-item" href="https://translate.fedoraproject.org/projects/guix/documentation-manual/">⊕</a></li></ul></div></li></ul></nav><a class="navbar-menu-btn" href="https://guix.gnu.org/manual/"></a></header>
<span id="Invoking-guix-weather"></span><div class="header">
<p>
Next: <a href="Invoking-guix-processes.html" accesskey="n" rel="next">Invoking guix processes</a>, Previous: <a href="Invoking-guix-container.html" accesskey="p" rel="prev">Invoking guix container</a>, Up: <a href="Utilities.html" accesskey="u" rel="up">Utilities</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr />
<span id="Invoking-guix-weather-1"></span><h3 class="section">10.15 Invoking <code>guix weather</code></h3>

<span id="index-guix-weather"></span>
<p>Occasionally you&rsquo;re grumpy because substitutes are lacking and you end
up building packages by yourself (see <a href="Substitutes.html">Substitutes</a>).  The
<code>guix weather</code> command reports on substitute availability on the
specified servers so you can have an idea of whether you&rsquo;ll be grumpy
today.  It can sometimes be useful info as a user, but it is primarily
useful to people running <code>guix publish</code> (see <a href="Invoking-guix-publish.html">Invoking guix publish</a>).
</p>
<span id="index-statistics_002c-for-substitutes"></span>
<span id="index-availability-of-substitutes"></span>
<span id="index-substitute-availability"></span>
<span id="index-weather_002c-substitute-availability"></span>
<p>Here&rsquo;s a sample run:
</p>
<div class="example">
<pre class="example">$ guix weather --substitute-urls=https://guix.example.org
computing 5,872 package derivations for x86_64-linux...
looking for 6,128 store items on https://guix.example.org..
updating substitutes from 'https://guix.example.org'... 100.0%
https://guix.example.org
  43.4% substitutes available (2,658 out of 6,128)
  7,032.5 MiB of nars (compressed)
  19,824.2 MiB on disk (uncompressed)
  0.030 seconds per request (182.9 seconds in total)
  33.5 requests per second

  9.8% (342 out of 3,470) of the missing items are queued
  867 queued builds
      x86_64-linux: 518 (59.7%)
      i686-linux: 221 (25.5%)
      aarch64-linux: 128 (14.8%)
  build rate: 23.41 builds per hour
      x86_64-linux: 11.16 builds per hour
      i686-linux: 6.03 builds per hour
      aarch64-linux: 6.41 builds per hour
</pre></div>

<span id="index-continuous-integration_002c-statistics"></span>
<p>As you can see, it reports the fraction of all the packages for which
substitutes are available on the server&mdash;regardless of whether
substitutes are enabled, and regardless of whether this server&rsquo;s signing
key is authorized.  It also reports the size of the compressed archives
(&ldquo;nars&rdquo;) provided by the server, the size the corresponding store
items occupy in the store (assuming deduplication is turned off), and
the server&rsquo;s throughput.  The second part gives continuous integration
(CI) statistics, if the server supports it.  In addition, using the
<samp>--coverage</samp> option, <code>guix weather</code> can list &ldquo;important&rdquo;
package substitutes missing on the server (see below).
</p>
<p>To achieve that, <code>guix weather</code> queries over HTTP(S) meta-data
(<em>narinfos</em>) for all the relevant store items.  Like <code>guix
challenge</code>, it ignores signatures on those substitutes, which is
innocuous since the command only gathers statistics and cannot install
those substitutes.
</p>
<p>The general syntax is:
</p>
<div class="example">
<pre class="example">guix weather <var>options</var>&hellip; [<var>packages</var>&hellip;]
</pre></div>

<p>When <var>packages</var> is omitted, <code>guix weather</code> checks the availability
of substitutes for <em>all</em> the packages, or for those specified with
<samp>--manifest</samp>; otherwise it only considers the specified packages.  It
is also possible to query specific system types with <samp>--system</samp>.
<code>guix weather</code> exits with a non-zero code when the fraction of
available substitutes is below 100%.
</p>
<p>The available options are listed below.
</p>
<dl compact="compact">
<dt><code>--substitute-urls=<var>urls</var></code></dt>
<dd><p><var>urls</var> is the space-separated list of substitute server URLs to
query.  When this option is omitted, the default set of substitute
servers is queried.
</p>
</dd>
<dt><code>--system=<var>system</var></code></dt>
<dt><code>-s <var>system</var></code></dt>
<dd><p>Query substitutes for <var>system</var>&mdash;e.g., <code>aarch64-linux</code>.  This
option can be repeated, in which case <code>guix weather</code> will query
substitutes for several system types.
</p>
</dd>
<dt><code>--manifest=<var>file</var></code></dt>
<dd><p>Instead of querying substitutes for all the packages, only ask for those
specified in <var>file</var>.  <var>file</var> must contain a <em>manifest</em>, as
with the <code>-m</code> option of <code>guix package</code> (see <a href="Invoking-guix-package.html">Invoking guix package</a>).
</p>
<p>This option can be repeated several times, in which case the manifests
are concatenated.
</p>
</dd>
<dt><code>--coverage[=<var>count</var>]</code></dt>
<dt><code>-c [<var>count</var>]</code></dt>
<dd><p>Report on substitute coverage for packages: list packages with at least
<var>count</var> dependents (zero by default) for which substitutes are
unavailable.  Dependent packages themselves are not listed: if <var>b</var> depends
on <var>a</var> and <var>a</var> has no substitutes, only <var>a</var> is listed, even though
<var>b</var> usually lacks substitutes as well.  The result looks like this:
</p>
<div class="example">
<pre class="example">$ guix weather --substitute-urls=https://ci.guix.gnu.org https://bordeaux.guix.gnu.org -c 10
computing 8,983 package derivations for x86_64-linux...
looking for 9,343 store items on https://ci.guix.gnu.org https://bordeaux.guix.gnu.org...
updating substitutes from 'https://ci.guix.gnu.org https://bordeaux.guix.gnu.org'... 100.0%
https://ci.guix.gnu.org https://bordeaux.guix.gnu.org
  64.7% substitutes available (6,047 out of 9,343)
&hellip;
2502 packages are missing from 'https://ci.guix.gnu.org https://bordeaux.guix.gnu.org' for 'x86_64-linux', among which:
    58  kcoreaddons@5.49.0      /gnu/store/&hellip;-kcoreaddons-5.49.0
    46  qgpgme@1.11.1           /gnu/store/&hellip;-qgpgme-1.11.1
    37  perl-http-cookiejar@0.008  /gnu/store/&hellip;-perl-http-cookiejar-0.008
    &hellip;
</pre></div>

<p>What this example shows is that <code>kcoreaddons</code> and presumably the 58
packages that depend on it have no substitutes at
<code>ci.guix.gnu.org</code>; likewise for <code>qgpgme</code> and the 46
packages that depend on it.
</p>
<p>If you are a Guix developer, or if you are taking care of this build farm,
you&rsquo;ll probably want to have a closer look at these packages: they may simply
fail to build.
</p>
</dd>
<dt><code>--display-missing</code></dt>
<dd><p>Display the list of store items for which substitutes are missing.
</p></dd>
</dl>

<hr />
<div class="header">
<p>
Next: <a href="Invoking-guix-processes.html" accesskey="n" rel="next">Invoking guix processes</a>, Previous: <a href="Invoking-guix-container.html" accesskey="p" rel="prev">Invoking guix container</a>, Up: <a href="Utilities.html" accesskey="u" rel="up">Utilities</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
