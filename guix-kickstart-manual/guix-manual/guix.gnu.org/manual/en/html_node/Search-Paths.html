<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--   Copyright (C) 2012-2022 Ludovic Courtès

Copyright (C) 2013, 2014, 2016 Andreas Enge

Copyright (C) 2013 Nikita Karetnikov

Copyright (C) 2014, 2015, 2016 Alex Kost

Copyright (C) 2015, 2016 Mathieu Lirzin

Copyright (C) 2014 Pierre-Antoine Rault

Copyright (C) 2015 Taylan Ulrich Bayırlı/Kammer

Copyright (C) 2015, 2016, 2017, 2019, 2020, 2021 Leo Famulari

Copyright (C) 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022 Ricardo Wurmus

Copyright (C) 2016 Ben Woodcroft

Copyright (C) 2016, 2017, 2018, 2021 Chris Marusich

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021, 2022 Efraim Flashner

Copyright (C) 2016 John Darrington

Copyright (C) 2016, 2017 Nikita Gillmann

Copyright (C) 2016, 2017, 2018, 2019, 2020 Jan Nieuwenhuizen

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021 Julien Lepiller

Copyright (C) 2016 Alex ter Weele

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021 Christopher Baines

Copyright (C) 2017, 2018, 2019 Clément Lassieur

Copyright (C) 2017, 2018, 2020, 2021, 2022 Mathieu Othacehe

Copyright (C) 2017 Federico Beffa

Copyright (C) 2017, 2018 Carlo Zancanaro

Copyright (C) 2017 Thomas Danckaert

Copyright (C) 2017 humanitiesNerd

Copyright (C) 2017, 2021 Christine Lemmer-Webber

Copyright (C) 2017, 2018, 2019, 2020, 2021, 2022 Marius Bakke

Copyright (C) 2017, 2019, 2020, 2022 Hartmut Goebel

Copyright (C) 2017, 2019, 2020, 2021, 2022 Maxim Cournoyer

Copyright (C) 2017–2022 Tobias Geerinckx-Rice

Copyright (C) 2017 George Clemmer

Copyright (C) 2017 Andy Wingo

Copyright (C) 2017, 2018, 2019, 2020 Arun Isaac

Copyright (C) 2017 nee

Copyright (C) 2018 Rutger Helling

Copyright (C) 2018, 2021 Oleg Pykhalov

Copyright (C) 2018 Mike Gerwitz

Copyright (C) 2018 Pierre-Antoine Rouby

Copyright (C) 2018, 2019 Gábor Boskovits

Copyright (C) 2018, 2019, 2020, 2022 Florian Pelz

Copyright (C) 2018 Laura Lazzati

Copyright (C) 2018 Alex Vong

Copyright (C) 2019 Josh Holland

Copyright (C) 2019, 2020 Diego Nicola Barbato

Copyright (C) 2019 Ivan Petkov

Copyright (C) 2019 Jakob L. Kreuze

Copyright (C) 2019 Kyle Andrews

Copyright (C) 2019 Alex Griffin

Copyright (C) 2019, 2020, 2021, 2022 Guillaume Le Vaillant

Copyright (C) 2020 Liliana Marie Prikler

Copyright (C) 2019, 2020, 2021, 2022 Simon Tournier

Copyright (C) 2020 Wiktor Żelazny

Copyright (C) 2020 Damien Cassou

Copyright (C) 2020 Jakub Kądziołka

Copyright (C) 2020 Jack Hill

Copyright (C) 2020 Naga Malleswari

Copyright (C) 2020, 2021 Brice Waegeneire

Copyright (C) 2020 R Veera Kumar

Copyright (C) 2020, 2021 Pierre Langlois

Copyright (C) 2020 pinoaffe

Copyright (C) 2020 André Batista

Copyright (C) 2020, 2021 Alexandru-Sergiu Marton

Copyright (C) 2020 raingloom

Copyright (C) 2020 Daniel Brooks

Copyright (C) 2020 John Soo

Copyright (C) 2020 Jonathan Brielmaier

Copyright (C) 2020 Edgar Vincent

Copyright (C) 2021, 2022 Maxime Devos

Copyright (C) 2021 B. Wilson

Copyright (C) 2021 Xinglu Chen

Copyright (C) 2021 Raghav Gururajan

Copyright (C) 2021 Domagoj Stolfa

Copyright (C) 2021 Hui Lu

Copyright (C) 2021 pukkamustard

Copyright (C) 2021 Alice Brenon

Copyright (C) 2021, 2022 Josselin Poiret

Copyright (C) 2021 muradm

Copyright (C) 2021, 2022 Andrew Tropin

Copyright (C) 2021 Sarah Morgensen

Copyright (C) 2022 Remco van 't Veer

Copyright (C) 2022 Aleksandr Vityazev

Copyright (C) 2022 Philip McGrath

Copyright (C) 2022 Karl Hallsby

Copyright (C) 2022 Justin Veilleux

Copyright (C) 2022 Reily Siegel

Copyright (C) 2022 Simon Streit

Copyright (C) 2022 (

Copyright (C) 2022 John Kehayias


Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled "GNU Free
Documentation License".   -->
<!--   Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/   -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Search Paths (GNU Guix Reference Manual)</title>

<meta name="description" content="Search Paths (GNU Guix Reference Manual)" />
<meta name="keywords" content="Search Paths (GNU Guix Reference Manual)" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="Generator" content="makeinfo" />
<link href="index.html" rel="start" title="Top" />
<link href="Concept-Index.html" rel="index" title="Concept Index" />
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents" />
<link href="Programming-Interface.html" rel="up" title="Programming Interface" />
<link href="The-Store.html" rel="next" title="The Store" />
<link href="Build-Utilities.html" rel="prev" title="Build Utilities" />
<style type="text/css">
&amp;lt;!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
--&amp;gt;
</style>
<link rel="stylesheet" type="text/css" href="https://www.gnu.org/software/gnulib/manual.css" />

<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" type="text/css" href="../../../static/base/css/manual.css" /><link rel="stylesheet" type="text/css" href="../../../static/base/css/code.css" /></head>

<body lang="en"><header class="navbar"><h1><a class="branding" href="https://guix.gnu.org/manual/en/"></a></h1><nav class="navbar-menu"><input class="navbar-menu-hidden-input" type="radio" name="dropdown" id="all-dropdowns-hidden" /><ul><li class="navbar-menu-item dropdown dropdown-btn"><input class="navbar-menu-hidden-input" type="radio" name="dropdown" id="visible-dropdown" /><label for="visible-dropdown"><img alt="Language" src="../../../static/base/img/language-picker.svg" /></label><label for="all-dropdowns-hidden"><img alt="Language" src="../../../static/base/img/language-picker.svg" /></label><div class="navbar-submenu" id="navbar-submenu"><div class="navbar-submenu-triangle"> </div><ul><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/de/html_node">Deutsch</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/en/html_node">English</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/es/html_node">Español</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/fr/html_node">français</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/pt-br/html_node">Português</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/ru/html_node">русский</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/zh-cn/html_node">中文</a></li><li><a class="navbar-menu-item" href="https://translate.fedoraproject.org/projects/guix/documentation-manual/">⊕</a></li></ul></div></li></ul></nav><a class="navbar-menu-btn" href="https://guix.gnu.org/manual/"></a></header>
<span id="Search-Paths"></span><div class="header">
<p>
Next: <a href="The-Store.html" accesskey="n" rel="next">The Store</a>, Previous: <a href="Build-Utilities.html" accesskey="p" rel="prev">Build Utilities</a>, Up: <a href="Programming-Interface.html" accesskey="u" rel="up">Programming Interface</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr />
<span id="Search-Paths-1"></span><h3 class="section">9.8 Search Paths</h3>

<span id="index-search-path"></span>
<p>Many programs and libraries look for input data in a <em>search path</em>,
a list of directories: shells like Bash look for executables in the
command search path, a C compiler looks for <samp>.h</samp> files in its
header search path, the Python interpreter looks for <samp>.py</samp>
files in its search path, the spell checker has a search path for
dictionaries, and so on.
</p>
<p>Search paths can usually be defined or overridden <i>via</i> environment
variables (see <a href="https://www.gnu.org/software/libc/manual/html_node/Environment-Variables.html#Environment-Variables">Environment Variables</a> in <cite>The GNU C Library
Reference Manual</cite>).  For example, the search paths mentioned above can
be changed by defining the <code>PATH</code>, <code>C_INCLUDE_PATH</code>,
<code>PYTHONPATH</code> (or <code>GUIX_PYTHONPATH</code>), and <code>DICPATH</code>
environment variables&mdash;you know, all these something-PATH variables
that you need to get right or things &ldquo;won&rsquo;t be found&rdquo;.
</p>
<p>You may have noticed from the command line that Guix &ldquo;knows&rdquo; which
search path environment variables should be defined, and how.  When you
install packages in your default profile, the file
<samp>~/.guix-profile/etc/profile</samp> is created, which you can &ldquo;source&rdquo;
from the shell to set those variables.  Likewise, if you ask
<code>guix shell</code> to create an environment containing Python and
NumPy, a Python library, and if you pass it the <samp>--search-paths</samp>
option, it will tell you about <code>PATH</code> and <code>GUIX_PYTHONPATH</code>
(see <a href="Invoking-guix-shell.html">Invoking guix shell</a>):
</p>
<div class="example">
<pre class="example">$ guix shell python python-numpy --pure --search-paths
export PATH="/gnu/store/&hellip;-profile/bin"
export GUIX_PYTHONPATH="/gnu/store/&hellip;-profile/lib/python3.9/site-packages"
</pre></div>

<p>When you omit <samp>--search-paths</samp>, it defines these environment
variables right away, such that Python can readily find NumPy:
</p>
<div class="example">
<pre class="example">$ guix shell python python-numpy -- python3
Python 3.9.6 (default, Jan  1 1970, 00:00:01)
[GCC 10.3.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import numpy
&gt;&gt;&gt; numpy.version.version
'1.20.3'
</pre></div>

<p>For this to work, the definition of the <code>python</code> package
<em>declares</em> the search path it cares about and its associated
environment variable, <code>GUIX_PYTHONPATH</code>.  It looks like this:
</p>
<div class="lisp">
<pre class="lisp"><span class="syntax-paren0">(<span class="syntax-symbol"><a class="syntax-symbol" href="package-Reference.html#index-package">package</a>
  <span class="syntax-paren1">(<span class="syntax-symbol"><span class="syntax-symbol">name</span> <span class="syntax-string">"python"</span></span>)</span>
  <span class="syntax-paren1">(<span class="syntax-symbol"><a class="syntax-symbol" href="https://www.gnu.org/software/guile/manual/html_node/Build-Config.html#index-version">version</a> <span class="syntax-string">"3.9.9"</span></span>)</span>
  <span class="syntax-comment">;; some fields omitted...
</span>  <span class="syntax-paren1">(<span class="syntax-symbol"><span class="syntax-symbol">native-search-paths</span>
   <span class="syntax-paren2">(<span class="syntax-symbol"><a class="syntax-symbol" href="https://www.gnu.org/software/guile/manual/html_node/List-Constructors.html#index-list-1">list</a> <span class="syntax-paren3">(<span class="syntax-symbol"><a class="syntax-symbol" href="Search-Paths.html#index-search_002dpath_002dspecification">search-path-specification</a>
          <span class="syntax-paren4">(<span class="syntax-symbol"><span class="syntax-symbol">variable</span> <span class="syntax-string">"GUIX_PYTHONPATH"</span></span>)</span>
          <span class="syntax-paren4">(<span class="syntax-symbol"><span class="syntax-symbol">files</span> <span class="syntax-paren5">(<span class="syntax-symbol"><a class="syntax-symbol" href="https://www.gnu.org/software/guile/manual/html_node/List-Constructors.html#index-list-1">list</a> <span class="syntax-string">"lib/python/3.9/site-packages"</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
</pre></div>

<p>What this <code>native-search-paths</code> field says is that, when the
<code>python</code> package is used, the <code>GUIX_PYTHONPATH</code> environment
variable must be defined to include all the
<samp>lib/python/3.9/site-packages</samp> sub-directories encountered in its
environment.  (The <code>native-</code> bit means that, if we are in a
cross-compilation environment, only native inputs may be added to the
search path; see <a href="package-Reference.html"><code>search-paths</code></a>.)
In the NumPy example above, the profile where
<code>python</code> appears contains exactly one such sub-directory, and
<code>GUIX_PYTHONPATH</code> is set to that.  When there are several
<samp>lib/python/3.9/site-packages</samp>&mdash;this is the case in package build
environments&mdash;they are all added to <code>GUIX_PYTHONPATH</code>, separated by
colons (<code>:</code>).
</p>
<blockquote>
<p><b>Note:</b> Notice that <code>GUIX_PYTHONPATH</code> is specified as part of the definition
of the <code>python</code> package, and <em>not</em> as part of that of
<code>python-numpy</code>.  This is because this environment variable
&ldquo;belongs&rdquo; to Python, not NumPy: Python actually reads the value of
that variable and honors it.
</p>
<p>Corollary: if you create a profile that does not contain <code>python</code>,
<code>GUIX_PYTHONPATH</code> will <em>not</em> be defined, even if it contains
packages that provide <samp>.py</samp> files:
</p>
<div class="example">
<pre class="example">$ guix shell python-numpy --search-paths --pure
export PATH="/gnu/store/&hellip;-profile/bin"
</pre></div>

<p>This makes a lot of sense if we look at this profile in isolation: no
software in this profile would read <code>GUIX_PYTHONPATH</code>.
</p></blockquote>

<p>Of course, there are many variations on that theme: some packages honor
more than one search path, some use separators other than colon, some
accumulate several directories in their search path, and so on.  A more
complex example is the search path of libxml2: the value of the
<code>XML_CATALOG_FILES</code> environment variable is space-separated, it must
contain a list of <samp>catalog.xml</samp> files (not directories), which are
to be found in <samp>xml</samp> sub-directories&mdash;nothing less.  The search
path specification looks like this:
</p>
<div class="lisp">
<pre class="lisp"><span class="syntax-paren0">(<span class="syntax-symbol"><a class="syntax-symbol" href="package-Reference.html#index-package">package</a>
  <span class="syntax-paren1">(<span class="syntax-symbol"><span class="syntax-symbol">name</span> <span class="syntax-string">"libxml2"</span></span>)</span>
  <span class="syntax-comment">;; some fields omitted
</span>  <span class="syntax-paren1">(<span class="syntax-symbol"><span class="syntax-symbol">native-search-paths</span>
   <span class="syntax-paren2">(<span class="syntax-symbol"><a class="syntax-symbol" href="https://www.gnu.org/software/guile/manual/html_node/List-Constructors.html#index-list-1">list</a> <span class="syntax-paren3">(<span class="syntax-symbol"><a class="syntax-symbol" href="Search-Paths.html#index-search_002dpath_002dspecification">search-path-specification</a>
          <span class="syntax-paren4">(<span class="syntax-symbol"><span class="syntax-symbol">variable</span> <span class="syntax-string">"XML_CATALOG_FILES"</span></span>)</span>
          <span class="syntax-paren4">(<span class="syntax-symbol"><span class="syntax-symbol">separator</span> <span class="syntax-string">" "</span></span>)</span>
          <span class="syntax-paren4">(<span class="syntax-symbol"><span class="syntax-symbol">files</span> <span class="syntax-symbol">'</span><span class="syntax-paren5">(<span class="syntax-symbol"><span class="syntax-string">"xml"</span></span>)</span></span>)</span>
          <span class="syntax-paren4">(<span class="syntax-symbol"><span class="syntax-symbol">file-pattern</span> <span class="syntax-string">"^catalog\\.xml$"</span></span>)</span>
          <span class="syntax-paren4">(<span class="syntax-symbol"><span class="syntax-symbol">file-type</span> <span class="syntax-symbol">'regular</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
</pre></div>

<p>Worry not, search path specifications are usually not this tricky.
</p>
<p>The <code>(guix search-paths)</code> module defines the data type of search
path specifications and a number of helper procedures.  Below is the
reference of search path specifications.
</p>
<dl>
<dt id="index-search_002dpath_002dspecification" class="symbol-definition"><span class="symbol-definition-category">Data Type: </span><span class="symbol-definition-prototype">search-path-specification </span></dt>
<dd><p>The data type for search path specifications.
</p>
<dl compact="compact">
<dt><code>variable</code></dt>
<dd><p>The name of the environment variable for this search path (a string).
</p>
</dd>
<dt><code>files</code></dt>
<dd><p>The list of sub-directories (strings) that should be added to the search
path.
</p>
</dd>
<dt><code>separator</code> (default: <code>":"</code>)</dt>
<dd><p>The string used to separate search path components.
</p>
<p>As a special case, a <code>separator</code> value of <code>#f</code> specifies a
&ldquo;single-component search path&rdquo;&mdash;in other words, a search path that
cannot contain more than one element.  This is useful in some cases,
such as the <code>SSL_CERT_DIR</code> variable (honored by OpenSSL, cURL, and
a few other packages) or the <code>ASPELL_DICT_DIR</code> variable (honored by
the GNU Aspell spell checker), both of which must point to a single
directory.
</p>
</dd>
<dt><code>file-type</code> (default: <code>'directory</code>)</dt>
<dd><p>The type of file being matched&mdash;<code>'directory</code> or <code>'regular</code>,
though it can be any symbol returned by <code>stat:type</code> (see <a href="https://www.gnu.org/software/guile/manual/html_node/File-System.html#File-System"><code>stat</code></a> in <cite>GNU Guile Reference Manual</cite>).
</p>
<p>In the libxml2 example above, we would match regular files; in the
Python example, we would match directories.
</p>
</dd>
<dt><code>file-pattern</code> (default: <code>#f</code>)</dt>
<dd><p>This must be either <code>#f</code> or a regular expression specifying
files to be matched <em>within</em> the sub-directories specified by the
<code>files</code> field.
</p>
<p>Again, the libxml2 example shows a situation where this is needed.
</p></dd>
</dl>
</dd></dl>

<p>Some search paths are not tied by a single package but to many packages.
To reduce duplications, some of them are pre-defined in <code>(guix
search-paths)</code>.
</p>
<dl>
<dt id="index-_0024SSL_005fCERT_005fDIR" class="symbol-definition"><span class="symbol-definition-category">Scheme Variable: </span><span class="symbol-definition-prototype">$SSL_CERT_DIR </span></dt>
<dt id="index-_0024SSL_005fCERT_005fFILE" class="symbol-definition"><span class="symbol-definition-category">Scheme Variable: </span><span class="symbol-definition-prototype">$SSL_CERT_FILE </span></dt>
<dd><p>These two search paths indicate where X.509 certificates can be found
(see <a href="X_002e509-Certificates.html">X.509 Certificates</a>).
</p></dd></dl>

<p>These pre-defined search paths can be used as in the following example:
</p>
<div class="lisp">
<pre class="lisp"><span class="syntax-paren0">(<span class="syntax-symbol"><a class="syntax-symbol" href="package-Reference.html#index-package">package</a>
  <span class="syntax-paren1">(<span class="syntax-symbol"><span class="syntax-symbol">name</span> <span class="syntax-string">"curl"</span></span>)</span>
  <span class="syntax-comment">;; some fields omitted ...
</span>  <span class="syntax-paren1">(<span class="syntax-symbol"><span class="syntax-symbol">native-search-paths</span> <span class="syntax-paren2">(<span class="syntax-symbol"><a class="syntax-symbol" href="https://www.gnu.org/software/guile/manual/html_node/List-Constructors.html#index-list-1">list</a> <a class="syntax-symbol" href="Search-Paths.html#index-_0024SSL_005fCERT_005fDIR">$SSL_CERT_DIR</a> <a class="syntax-symbol" href="Search-Paths.html#index-_0024SSL_005fCERT_005fFILE">$SSL_CERT_FILE</a></span>)</span></span>)</span></span>)</span>
</pre></div>

<p>How do you turn search path specifications on one hand and a bunch of
directories on the other hand in a set of environment variable
definitions?  That&rsquo;s the job of <code>evaluate-search-paths</code>.
</p>
<dl>
<dt id="index-evaluate_002dsearch_002dpaths" class="symbol-definition"><span class="symbol-definition-category">Scheme Procedure: </span><span class="symbol-definition-prototype">evaluate-search-paths <var>search-paths</var>   <var>directories</var> [<var>getenv</var>]</span></dt>
<dd><p>Evaluate <var>search-paths</var>, a list of search-path specifications, for
<var>directories</var>, a list of directory names, and return a list of
specification/value pairs.  Use <var>getenv</var> to determine the current
settings and report only settings not already effective.
</p></dd></dl>

<p>The <code>(guix profiles)</code> provides a higher-level helper procedure,
<code>load-profile</code>, that sets the environment variables of a profile.
</p>
<hr />
<div class="header">
<p>
Next: <a href="The-Store.html" accesskey="n" rel="next">The Store</a>, Previous: <a href="Build-Utilities.html" accesskey="p" rel="prev">Build Utilities</a>, Up: <a href="Programming-Interface.html" accesskey="u" rel="up">Programming Interface</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
