<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--   Copyright (C) 2012-2022 Ludovic Courtès

Copyright (C) 2013, 2014, 2016 Andreas Enge

Copyright (C) 2013 Nikita Karetnikov

Copyright (C) 2014, 2015, 2016 Alex Kost

Copyright (C) 2015, 2016 Mathieu Lirzin

Copyright (C) 2014 Pierre-Antoine Rault

Copyright (C) 2015 Taylan Ulrich Bayırlı/Kammer

Copyright (C) 2015, 2016, 2017, 2019, 2020, 2021 Leo Famulari

Copyright (C) 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022 Ricardo Wurmus

Copyright (C) 2016 Ben Woodcroft

Copyright (C) 2016, 2017, 2018, 2021 Chris Marusich

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021, 2022 Efraim Flashner

Copyright (C) 2016 John Darrington

Copyright (C) 2016, 2017 Nikita Gillmann

Copyright (C) 2016, 2017, 2018, 2019, 2020 Jan Nieuwenhuizen

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021 Julien Lepiller

Copyright (C) 2016 Alex ter Weele

Copyright (C) 2016, 2017, 2018, 2019, 2020, 2021 Christopher Baines

Copyright (C) 2017, 2018, 2019 Clément Lassieur

Copyright (C) 2017, 2018, 2020, 2021, 2022 Mathieu Othacehe

Copyright (C) 2017 Federico Beffa

Copyright (C) 2017, 2018 Carlo Zancanaro

Copyright (C) 2017 Thomas Danckaert

Copyright (C) 2017 humanitiesNerd

Copyright (C) 2017, 2021 Christine Lemmer-Webber

Copyright (C) 2017, 2018, 2019, 2020, 2021, 2022 Marius Bakke

Copyright (C) 2017, 2019, 2020, 2022 Hartmut Goebel

Copyright (C) 2017, 2019, 2020, 2021, 2022 Maxim Cournoyer

Copyright (C) 2017–2022 Tobias Geerinckx-Rice

Copyright (C) 2017 George Clemmer

Copyright (C) 2017 Andy Wingo

Copyright (C) 2017, 2018, 2019, 2020 Arun Isaac

Copyright (C) 2017 nee

Copyright (C) 2018 Rutger Helling

Copyright (C) 2018, 2021 Oleg Pykhalov

Copyright (C) 2018 Mike Gerwitz

Copyright (C) 2018 Pierre-Antoine Rouby

Copyright (C) 2018, 2019 Gábor Boskovits

Copyright (C) 2018, 2019, 2020, 2022 Florian Pelz

Copyright (C) 2018 Laura Lazzati

Copyright (C) 2018 Alex Vong

Copyright (C) 2019 Josh Holland

Copyright (C) 2019, 2020 Diego Nicola Barbato

Copyright (C) 2019 Ivan Petkov

Copyright (C) 2019 Jakob L. Kreuze

Copyright (C) 2019 Kyle Andrews

Copyright (C) 2019 Alex Griffin

Copyright (C) 2019, 2020, 2021, 2022 Guillaume Le Vaillant

Copyright (C) 2020 Liliana Marie Prikler

Copyright (C) 2019, 2020, 2021, 2022 Simon Tournier

Copyright (C) 2020 Wiktor Żelazny

Copyright (C) 2020 Damien Cassou

Copyright (C) 2020 Jakub Kądziołka

Copyright (C) 2020 Jack Hill

Copyright (C) 2020 Naga Malleswari

Copyright (C) 2020, 2021 Brice Waegeneire

Copyright (C) 2020 R Veera Kumar

Copyright (C) 2020, 2021 Pierre Langlois

Copyright (C) 2020 pinoaffe

Copyright (C) 2020 André Batista

Copyright (C) 2020, 2021 Alexandru-Sergiu Marton

Copyright (C) 2020 raingloom

Copyright (C) 2020 Daniel Brooks

Copyright (C) 2020 John Soo

Copyright (C) 2020 Jonathan Brielmaier

Copyright (C) 2020 Edgar Vincent

Copyright (C) 2021, 2022 Maxime Devos

Copyright (C) 2021 B. Wilson

Copyright (C) 2021 Xinglu Chen

Copyright (C) 2021 Raghav Gururajan

Copyright (C) 2021 Domagoj Stolfa

Copyright (C) 2021 Hui Lu

Copyright (C) 2021 pukkamustard

Copyright (C) 2021 Alice Brenon

Copyright (C) 2021, 2022 Josselin Poiret

Copyright (C) 2021 muradm

Copyright (C) 2021, 2022 Andrew Tropin

Copyright (C) 2021 Sarah Morgensen

Copyright (C) 2022 Remco van 't Veer

Copyright (C) 2022 Aleksandr Vityazev

Copyright (C) 2022 Philip McGrath

Copyright (C) 2022 Karl Hallsby

Copyright (C) 2022 Justin Veilleux

Copyright (C) 2022 Reily Siegel

Copyright (C) 2022 Simon Streit

Copyright (C) 2022 (

Copyright (C) 2022 John Kehayias


Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled "GNU Free
Documentation License".   -->
<!--   Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/   -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>DNS Services (GNU Guix Reference Manual)</title>

<meta name="description" content="DNS Services (GNU Guix Reference Manual)" />
<meta name="keywords" content="DNS Services (GNU Guix Reference Manual)" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="Generator" content="makeinfo" />
<link href="index.html" rel="start" title="Top" />
<link href="Concept-Index.html" rel="index" title="Concept Index" />
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents" />
<link href="Services.html" rel="up" title="Services" />
<link href="VNC-Services.html" rel="next" title="VNC Services" />
<link href="Certificate-Services.html" rel="prev" title="Certificate Services" />
<style type="text/css">
&amp;lt;!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
--&amp;gt;
</style>
<link rel="stylesheet" type="text/css" href="https://www.gnu.org/software/gnulib/manual.css" />

<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" type="text/css" href="../../../static/base/css/manual.css" /><link rel="stylesheet" type="text/css" href="../../../static/base/css/code.css" /></head>

<body lang="en"><header class="navbar"><h1><a class="branding" href="https://guix.gnu.org/manual/en/"></a></h1><nav class="navbar-menu"><input class="navbar-menu-hidden-input" type="radio" name="dropdown" id="all-dropdowns-hidden" /><ul><li class="navbar-menu-item dropdown dropdown-btn"><input class="navbar-menu-hidden-input" type="radio" name="dropdown" id="visible-dropdown" /><label for="visible-dropdown"><img alt="Language" src="../../../static/base/img/language-picker.svg" /></label><label for="all-dropdowns-hidden"><img alt="Language" src="../../../static/base/img/language-picker.svg" /></label><div class="navbar-submenu" id="navbar-submenu"><div class="navbar-submenu-triangle"> </div><ul><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/de/html_node">Deutsch</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/en/html_node">English</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/es/html_node">Español</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/fr/html_node">français</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/pt-br/html_node">Português</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/ru/html_node">русский</a></li><li><a class="navbar-menu-item" href="https://guix.gnu.org/manual/zh-cn/html_node">中文</a></li><li><a class="navbar-menu-item" href="https://translate.fedoraproject.org/projects/guix/documentation-manual/">⊕</a></li></ul></div></li></ul></nav><a class="navbar-menu-btn" href="https://guix.gnu.org/manual/"></a></header>
<span id="DNS-Services"></span><div class="header">
<p>
Next: <a href="VNC-Services.html" accesskey="n" rel="next">VNC Services</a>, Previous: <a href="Certificate-Services.html" accesskey="p" rel="prev">Certificate Services</a>, Up: <a href="Services.html" accesskey="u" rel="up">Services</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr />
<span id="DNS-Services-1"></span><h4 class="subsection">12.9.21 DNS Services</h4>
<span id="index-DNS-_0028domain-name-system_0029"></span>
<span id="index-domain-name-system-_0028DNS_0029"></span>

<p>The <code>(gnu services dns)</code> module provides services related to the
<em>domain name system</em> (DNS).  It provides a server service for hosting
an <em>authoritative</em> DNS server for multiple zones, slave or master.
This service uses <a href="https://www.knot-dns.cz/">Knot DNS</a>.  And also a
caching and forwarding DNS server for the LAN, which uses
<a href="http://www.thekelleys.org.uk/dnsmasq/doc.html">dnsmasq</a>.
</p>
<span id="Knot-Service"></span><h4 class="subsubheading">Knot Service</h4>

<p>An example configuration of an authoritative server for two zones, one master
and one slave, is:
</p>
<div class="lisp">
<pre class="lisp"><span class="syntax-paren0">(<span class="syntax-symbol"><span class="syntax-special">define-zone-entries</span> <span class="syntax-symbol">example.org.zone</span>
<span class="syntax-comment">;; Name TTL Class Type Data
</span>  <span class="syntax-paren1">(<span class="syntax-symbol"><span class="syntax-string">"@"</span>  <span class="syntax-string">""</span>  <span class="syntax-string">"IN"</span>  <span class="syntax-string">"A"</span>  <span class="syntax-string">"127.0.0.1"</span></span>)</span>
  <span class="syntax-paren1">(<span class="syntax-symbol"><span class="syntax-string">"@"</span>  <span class="syntax-string">""</span>  <span class="syntax-string">"IN"</span>  <span class="syntax-string">"NS"</span> <span class="syntax-string">"ns"</span></span>)</span>
  <span class="syntax-paren1">(<span class="syntax-symbol"><span class="syntax-string">"ns"</span> <span class="syntax-string">""</span>  <span class="syntax-string">"IN"</span>  <span class="syntax-string">"A"</span>  <span class="syntax-string">"127.0.0.1"</span></span>)</span></span>)</span>

<span class="syntax-paren0">(<span class="syntax-symbol"><span class="syntax-special">define</span> <span class="syntax-symbol">master-zone</span>
  <span class="syntax-paren1">(<span class="syntax-symbol"><a class="syntax-symbol" href="DNS-Services.html#index-knot_002dzone_002dconfiguration">knot-zone-configuration</a>
    <span class="syntax-paren2">(<span class="syntax-symbol"><span class="syntax-symbol">domain</span> <span class="syntax-string">"example.org"</span></span>)</span>
    <span class="syntax-paren2">(<span class="syntax-symbol"><span class="syntax-symbol">zone</span> <span class="syntax-paren3">(<span class="syntax-symbol"><a class="syntax-symbol" href="DNS-Services.html#index-zone_002dfile">zone-file</a>
            <span class="syntax-paren4">(<span class="syntax-symbol"><a class="syntax-symbol" href="origin-Reference.html#index-origin">origin</a> <span class="syntax-string">"example.org"</span></span>)</span>
            <span class="syntax-paren4">(<span class="syntax-symbol"><span class="syntax-symbol">entries</span> <span class="syntax-symbol">example.org.zone</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="syntax-paren0">(<span class="syntax-symbol"><span class="syntax-special">define</span> <span class="syntax-symbol">slave-zone</span>
  <span class="syntax-paren1">(<span class="syntax-symbol"><a class="syntax-symbol" href="DNS-Services.html#index-knot_002dzone_002dconfiguration">knot-zone-configuration</a>
    <span class="syntax-paren2">(<span class="syntax-symbol"><span class="syntax-symbol">domain</span> <span class="syntax-string">"plop.org"</span></span>)</span>
    <span class="syntax-paren2">(<span class="syntax-symbol"><span class="syntax-symbol">dnssec-policy</span> <span class="syntax-string">"default"</span></span>)</span>
    <span class="syntax-paren2">(<span class="syntax-symbol"><span class="syntax-symbol">master</span> <span class="syntax-paren3">(<span class="syntax-symbol"><a class="syntax-symbol" href="https://www.gnu.org/software/guile/manual/html_node/List-Constructors.html#index-list-1">list</a> <span class="syntax-string">"plop-master"</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="syntax-paren0">(<span class="syntax-symbol"><span class="syntax-special">define</span> <span class="syntax-symbol">plop-master</span>
  <span class="syntax-paren1">(<span class="syntax-symbol"><a class="syntax-symbol" href="DNS-Services.html#index-knot_002dremote_002dconfiguration">knot-remote-configuration</a>
    <span class="syntax-paren2">(<span class="syntax-symbol"><span class="syntax-symbol">id</span> <span class="syntax-string">"plop-master"</span></span>)</span>
    <span class="syntax-paren2">(<span class="syntax-symbol"><span class="syntax-symbol">address</span> <span class="syntax-paren3">(<span class="syntax-symbol"><a class="syntax-symbol" href="https://www.gnu.org/software/guile/manual/html_node/List-Constructors.html#index-list-1">list</a> <span class="syntax-string">"208.76.58.171"</span></span>)</span></span>)</span></span>)</span></span>)</span>

<span class="syntax-paren0">(<span class="syntax-symbol"><a class="syntax-symbol" href="operating_002dsystem-Reference.html#index-operating_002dsystem-1">operating-system</a>
  <span class="syntax-comment">;; ...
</span>  <span class="syntax-paren1">(<span class="syntax-symbol"><span class="syntax-symbol">services</span> <span class="syntax-paren2">(<span class="syntax-symbol"><a class="syntax-symbol" href="https://www.gnu.org/software/guile/manual/html_node/List-Constructors.html#index-cons_002a">cons*</a> <span class="syntax-paren3">(<span class="syntax-symbol"><a class="syntax-symbol" href="Service-Reference.html#index-service">service</a> <a class="syntax-symbol" href="DNS-Services.html#index-knot_002dservice_002dtype">knot-service-type</a>
                     <span class="syntax-paren4">(<span class="syntax-symbol"><a class="syntax-symbol" href="DNS-Services.html#index-knot_002dconfiguration">knot-configuration</a>
                       <span class="syntax-paren5">(<span class="syntax-symbol"><span class="syntax-symbol">remotes</span> <span class="syntax-paren6">(<span class="syntax-symbol"><a class="syntax-symbol" href="https://www.gnu.org/software/guile/manual/html_node/List-Constructors.html#index-list-1">list</a> <span class="syntax-symbol">plop-master</span></span>)</span></span>)</span>
                       <span class="syntax-paren5">(<span class="syntax-symbol"><span class="syntax-symbol">zones</span> <span class="syntax-paren6">(<span class="syntax-symbol"><a class="syntax-symbol" href="https://www.gnu.org/software/guile/manual/html_node/List-Constructors.html#index-list-1">list</a> <span class="syntax-symbol">master-zone</span> <span class="syntax-symbol">slave-zone</span></span>)</span></span>)</span></span>)</span></span>)</span>
                   <span class="syntax-comment">;; ...
</span>                   <a class="syntax-symbol" href="Base-Services.html#index-_0025base_002dservices-1">%base-services</a></span>)</span></span>)</span></span>)</span>
</pre></div>

<dl>
<dt id="index-knot_002dservice_002dtype" class="symbol-definition"><span class="symbol-definition-category">Scheme Variable: </span><span class="symbol-definition-prototype">knot-service-type </span></dt>
<dd><p>This is the type for the Knot DNS server.
</p>
<p>Knot DNS is an authoritative DNS server, meaning that it can serve multiple
zones, that is to say domain names you would buy from a registrar.  This server
is not a resolver, meaning that it can only resolve names for which it is
authoritative.  This server can be configured to serve zones as a master server
or a slave server as a per-zone basis.  Slave zones will get their data from
masters, and will serve it as an authoritative server.  From the point of view
of a resolver, there is no difference between master and slave.
</p>
<p>The following data types are used to configure the Knot DNS server:
</p></dd></dl>

<dl>
<dt id="index-knot_002dkey_002dconfiguration" class="symbol-definition"><span class="symbol-definition-category">Data Type: </span><span class="symbol-definition-prototype">knot-key-configuration </span></dt>
<dd><p>Data type representing a key.
This type has the following parameters:
</p>
<dl compact="compact">
<dt><code>id</code> (default: <code>""</code>)</dt>
<dd><p>An identifier for other configuration fields to refer to this key.  IDs must
be unique and must not be empty.
</p>
</dd>
<dt><code>algorithm</code> (default: <code>#f</code>)</dt>
<dd><p>The algorithm to use.  Choose between <code>#f</code>, <code>'hmac-md5</code>,
<code>'hmac-sha1</code>, <code>'hmac-sha224</code>, <code>'hmac-sha256</code>, <code>'hmac-sha384</code>
and <code>'hmac-sha512</code>.
</p>
</dd>
<dt><code>secret</code> (default: <code>""</code>)</dt>
<dd><p>The secret key itself.
</p>
</dd>
</dl>
</dd></dl>

<dl>
<dt id="index-knot_002dacl_002dconfiguration" class="symbol-definition"><span class="symbol-definition-category">Data Type: </span><span class="symbol-definition-prototype">knot-acl-configuration </span></dt>
<dd><p>Data type representing an Access Control List (ACL) configuration.
This type has the following parameters:
</p>
<dl compact="compact">
<dt><code>id</code> (default: <code>""</code>)</dt>
<dd><p>An identifier for other configuration fields to refer to this key.  IDs must be
unique and must not be empty.
</p>
</dd>
<dt><code>address</code> (default: <code>'()</code>)</dt>
<dd><p>An ordered list of IP addresses, network subnets, or network ranges represented
with strings.  The query must match one of them.  Empty value means that
address match is not required.
</p>
</dd>
<dt><code>key</code> (default: <code>'()</code>)</dt>
<dd><p>An ordered list of references to keys represented with strings.  The string
must match a key ID defined in a <code>knot-key-configuration</code>.  No key means
that a key is not require to match that ACL.
</p>
</dd>
<dt><code>action</code> (default: <code>'()</code>)</dt>
<dd><p>An ordered list of actions that are permitted or forbidden by this ACL.  Possible
values are lists of zero or more elements from <code>'transfer</code>, <code>'notify</code>
and <code>'update</code>.
</p>
</dd>
<dt><code>deny?</code> (default: <code>#f</code>)</dt>
<dd><p>When true, the ACL defines restrictions.  Listed actions are forbidden.  When
false, listed actions are allowed.
</p>
</dd>
</dl>
</dd></dl>

<dl>
<dt id="index-zone_002dentry" class="symbol-definition"><span class="symbol-definition-category">Data Type: </span><span class="symbol-definition-prototype">zone-entry </span></dt>
<dd><p>Data type representing a record entry in a zone file.
This type has the following parameters:
</p>
<dl compact="compact">
<dt><code>name</code> (default: <code>"@"</code>)</dt>
<dd><p>The name of the record.  <code>"@"</code> refers to the origin of the zone.  Names
are relative to the origin of the zone.  For example, in the <code>example.org</code>
zone, <code>"ns.example.org"</code> actually refers to <code>ns.example.org.example.org</code>.
Names ending with a dot are absolute, which means that <code>"ns.example.org."</code>
refers to <code>ns.example.org</code>.
</p>
</dd>
<dt><code>ttl</code> (default: <code>""</code>)</dt>
<dd><p>The Time-To-Live (TTL) of this record.  If not set, the default TTL is used.
</p>
</dd>
<dt><code>class</code> (default: <code>"IN"</code>)</dt>
<dd><p>The class of the record.  Knot currently supports only <code>"IN"</code> and
partially <code>"CH"</code>.
</p>
</dd>
<dt><code>type</code> (default: <code>"A"</code>)</dt>
<dd><p>The type of the record.  Common types include A (IPv4 address), AAAA (IPv6
address), NS (Name Server) and MX (Mail eXchange).  Many other types are
defined.
</p>
</dd>
<dt><code>data</code> (default: <code>""</code>)</dt>
<dd><p>The data contained in the record.  For instance an IP address associated with
an A record, or a domain name associated with an NS record.  Remember that
domain names are relative to the origin unless they end with a dot.
</p>
</dd>
</dl>
</dd></dl>

<dl>
<dt id="index-zone_002dfile" class="symbol-definition"><span class="symbol-definition-category">Data Type: </span><span class="symbol-definition-prototype">zone-file </span></dt>
<dd><p>Data type representing the content of a zone file.
This type has the following parameters:
</p>
<dl compact="compact">
<dt><code>entries</code> (default: <code>'()</code>)</dt>
<dd><p>The list of entries.  The SOA record is taken care of, so you don&rsquo;t need to
put it in the list of entries.  This list should probably contain an entry
for your primary authoritative DNS server.  Other than using a list of entries
directly, you can use <code>define-zone-entries</code> to define a object containing
the list of entries more easily, that you can later pass to the <code>entries</code>
field of the <code>zone-file</code>.
</p>
</dd>
<dt><code>origin</code> (default: <code>""</code>)</dt>
<dd><p>The name of your zone.  This parameter cannot be empty.
</p>
</dd>
<dt><code>ns</code> (default: <code>"ns"</code>)</dt>
<dd><p>The domain of your primary authoritative DNS server.  The name is relative to
the origin, unless it ends with a dot.  It is mandatory that this primary
DNS server corresponds to an NS record in the zone and that it is associated
to an IP address in the list of entries.
</p>
</dd>
<dt><code>mail</code> (default: <code>"hostmaster"</code>)</dt>
<dd><p>An email address people can contact you at, as the owner of the zone.  This
is translated as <code>&lt;mail&gt;@&lt;origin&gt;</code>.
</p>
</dd>
<dt><code>serial</code> (default: <code>1</code>)</dt>
<dd><p>The serial number of the zone.  As this is used to keep track of changes by
both slaves and resolvers, it is mandatory that it <em>never</em> decreases.
Always increment it when you make a change in your zone.
</p>
</dd>
<dt><code>refresh</code> (default: <code>(* 2 24 3600)</code>)</dt>
<dd><p>The frequency at which slaves will do a zone transfer.  This value is a number
of seconds.  It can be computed by multiplications or with
<code>(string-&gt;duration)</code>.
</p>
</dd>
<dt><code>retry</code> (default: <code>(* 15 60)</code>)</dt>
<dd><p>The period after which a slave will retry to contact its master when it fails
to do so a first time.
</p>
</dd>
<dt><code>expiry</code> (default: <code>(* 14 24 3600)</code>)</dt>
<dd><p>Default TTL of records.  Existing records are considered correct for at most
this amount of time.  After this period, resolvers will invalidate their cache
and check again that it still exists.
</p>
</dd>
<dt><code>nx</code> (default: <code>3600</code>)</dt>
<dd><p>Default TTL of inexistent records.  This delay is usually short because you want
your new domains to reach everyone quickly.
</p>
</dd>
</dl>
</dd></dl>

<dl>
<dt id="index-knot_002dremote_002dconfiguration" class="symbol-definition"><span class="symbol-definition-category">Data Type: </span><span class="symbol-definition-prototype">knot-remote-configuration </span></dt>
<dd><p>Data type representing a remote configuration.
This type has the following parameters:
</p>
<dl compact="compact">
<dt><code>id</code> (default: <code>""</code>)</dt>
<dd><p>An identifier for other configuration fields to refer to this remote.  IDs must
be unique and must not be empty.
</p>
</dd>
<dt><code>address</code> (default: <code>'()</code>)</dt>
<dd><p>An ordered list of destination IP addresses.  Addresses are tried in sequence.
An optional port can be given with the @ separator.  For instance:
<code>(list "1.2.3.4" "2.3.4.5@53")</code>.  Default port is 53.
</p>
</dd>
<dt><code>via</code> (default: <code>'()</code>)</dt>
<dd><p>An ordered list of source IP addresses.  An empty list will have Knot choose
an appropriate source IP.  An optional port can be given with the @ separator.
The default is to choose at random.
</p>
</dd>
<dt><code>key</code> (default: <code>#f</code>)</dt>
<dd><p>A reference to a key, that is a string containing the identifier of a key
defined in a <code>knot-key-configuration</code> field.
</p>
</dd>
</dl>
</dd></dl>

<dl>
<dt id="index-knot_002dkeystore_002dconfiguration" class="symbol-definition"><span class="symbol-definition-category">Data Type: </span><span class="symbol-definition-prototype">knot-keystore-configuration </span></dt>
<dd><p>Data type representing a keystore to hold dnssec keys.
This type has the following parameters:
</p>
<dl compact="compact">
<dt><code>id</code> (default: <code>""</code>)</dt>
<dd><p>The id of the keystore.  It must not be empty.
</p>
</dd>
<dt><code>backend</code> (default: <code>'pem</code>)</dt>
<dd><p>The backend to store the keys in.  Can be <code>'pem</code> or <code>'pkcs11</code>.
</p>
</dd>
<dt><code>config</code> (default: <code>"/var/lib/knot/keys/keys"</code>)</dt>
<dd><p>The configuration string of the backend.  An example for the PKCS#11 is:
<code>"pkcs11:token=knot;pin-value=1234 /gnu/store/.../lib/pkcs11/libsofthsm2.so"</code>.
For the pem backend, the string represents a path in the file system.
</p>
</dd>
</dl>
</dd></dl>

<dl>
<dt id="index-knot_002dpolicy_002dconfiguration" class="symbol-definition"><span class="symbol-definition-category">Data Type: </span><span class="symbol-definition-prototype">knot-policy-configuration </span></dt>
<dd><p>Data type representing a dnssec policy.  Knot DNS is able to automatically
sign your zones.  It can either generate and manage your keys automatically or
use keys that you generate.
</p>
<p>Dnssec is usually implemented using two keys: a Key Signing Key (KSK) that is
used to sign the second, and a Zone Signing Key (ZSK) that is used to sign the
zone.  In order to be trusted, the KSK needs to be present in the parent zone
(usually a top-level domain).  If your registrar supports dnssec, you will
have to send them your KSK&rsquo;s hash so they can add a DS record in their zone.
This is not automated and need to be done each time you change your KSK.
</p>
<p>The policy also defines the lifetime of keys.  Usually, ZSK can be changed
easily and use weaker cryptographic functions (they use lower parameters) in
order to sign records quickly, so they are changed often.  The KSK however
requires manual interaction with the registrar, so they are changed less often
and use stronger parameters because they sign only one record.
</p>
<p>This type has the following parameters:
</p>
<dl compact="compact">
<dt><code>id</code> (default: <code>""</code>)</dt>
<dd><p>The id of the policy.  It must not be empty.
</p>
</dd>
<dt><code>keystore</code> (default: <code>"default"</code>)</dt>
<dd><p>A reference to a keystore, that is a string containing the identifier of a
keystore defined in a <code>knot-keystore-configuration</code> field.  The
<code>"default"</code> identifier means the default keystore (a kasp database that
was setup by this service).
</p>
</dd>
<dt><code>manual?</code> (default: <code>#f</code>)</dt>
<dd><p>Whether the key management is manual or automatic.
</p>
</dd>
<dt><code>single-type-signing?</code> (default: <code>#f</code>)</dt>
<dd><p>When <code>#t</code>, use the Single-Type Signing Scheme.
</p>
</dd>
<dt><code>algorithm</code> (default: <code>"ecdsap256sha256"</code>)</dt>
<dd><p>An algorithm of signing keys and issued signatures.
</p>
</dd>
<dt><code>ksk-size</code> (default: <code>256</code>)</dt>
<dd><p>The length of the KSK.  Note that this value is correct for the default
algorithm, but would be unsecure for other algorithms.
</p>
</dd>
<dt><code>zsk-size</code> (default: <code>256</code>)</dt>
<dd><p>The length of the ZSK.  Note that this value is correct for the default
algorithm, but would be unsecure for other algorithms.
</p>
</dd>
<dt><code>dnskey-ttl</code> (default: <code>'default</code>)</dt>
<dd><p>The TTL value for DNSKEY records added into zone apex.  The special
<code>'default</code> value means same as the zone SOA TTL.
</p>
</dd>
<dt><code>zsk-lifetime</code> (default: <code>(* 30 24 3600)</code>)</dt>
<dd><p>The period between ZSK publication and the next rollover initiation.
</p>
</dd>
<dt><code>propagation-delay</code> (default: <code>(* 24 3600)</code>)</dt>
<dd><p>An extra delay added for each key rollover step.  This value should be high
enough to cover propagation of data from the master server to all slaves.
</p>
</dd>
<dt><code>rrsig-lifetime</code> (default: <code>(* 14 24 3600)</code>)</dt>
<dd><p>A validity period of newly issued signatures.
</p>
</dd>
<dt><code>rrsig-refresh</code> (default: <code>(* 7 24 3600)</code>)</dt>
<dd><p>A period how long before a signature expiration the signature will be refreshed.
</p>
</dd>
<dt><code>nsec3?</code> (default: <code>#f</code>)</dt>
<dd><p>When <code>#t</code>, NSEC3 will be used instead of NSEC.
</p>
</dd>
<dt><code>nsec3-iterations</code> (default: <code>5</code>)</dt>
<dd><p>The number of additional times the hashing is performed.
</p>
</dd>
<dt><code>nsec3-salt-length</code> (default: <code>8</code>)</dt>
<dd><p>The length of a salt field in octets, which is appended to the original owner
name before hashing.
</p>
</dd>
<dt><code>nsec3-salt-lifetime</code> (default: <code>(* 30 24 3600)</code>)</dt>
<dd><p>The validity period of newly issued salt field.
</p>
</dd>
</dl>
</dd></dl>

<dl>
<dt id="index-knot_002dzone_002dconfiguration" class="symbol-definition"><span class="symbol-definition-category">Data Type: </span><span class="symbol-definition-prototype">knot-zone-configuration </span></dt>
<dd><p>Data type representing a zone served by Knot.
This type has the following parameters:
</p>
<dl compact="compact">
<dt><code>domain</code> (default: <code>""</code>)</dt>
<dd><p>The domain served by this configuration.  It must not be empty.
</p>
</dd>
<dt><code>file</code> (default: <code>""</code>)</dt>
<dd><p>The file where this zone is saved.  This parameter is ignored by master zones.
Empty means default location that depends on the domain name.
</p>
</dd>
<dt><code>zone</code> (default: <code>(zone-file)</code>)</dt>
<dd><p>The content of the zone file.  This parameter is ignored by slave zones.  It
must contain a zone-file record.
</p>
</dd>
<dt><code>master</code> (default: <code>'()</code>)</dt>
<dd><p>A list of master remotes.  When empty, this zone is a master.  When set, this
zone is a slave.  This is a list of remotes identifiers.
</p>
</dd>
<dt><code>ddns-master</code> (default: <code>#f</code>)</dt>
<dd><p>The main master.  When empty, it defaults to the first master in the list of
masters.
</p>
</dd>
<dt><code>notify</code> (default: <code>'()</code>)</dt>
<dd><p>A list of slave remote identifiers.
</p>
</dd>
<dt><code>acl</code> (default: <code>'()</code>)</dt>
<dd><p>A list of acl identifiers.
</p>
</dd>
<dt><code>semantic-checks?</code> (default: <code>#f</code>)</dt>
<dd><p>When set, this adds more semantic checks to the zone.
</p>
</dd>
<dt><code>zonefile-sync</code> (default: <code>0</code>)</dt>
<dd><p>The delay between a modification in memory and on disk.  0 means immediate
synchronization.
</p>
</dd>
<dt><code>zonefile-load</code> (default: <code>#f</code>)</dt>
<dd><p>The way the zone file contents are applied during zone load.  Possible values
are:
</p>
<ul>
<li> <code>#f</code> for using the default value from Knot,
</li><li> <code>'none</code> for not using the zone file at all,
</li><li> <code>'difference</code> for computing the difference between already available
contents and zone contents and applying it to the current zone contents,
</li><li> <code>'difference-no-serial</code> for the same as <code>'difference</code>, but
ignoring the SOA serial in the zone file, while the server takes care of it
automatically.
</li><li> <code>'whole</code> for loading zone contents from the zone file.
</li></ul>

</dd>
<dt><code>journal-content</code> (default: <code>#f</code>)</dt>
<dd><p>The way the journal is used to store zone and its changes.  Possible values
are <code>'none</code> to not use it at all, <code>'changes</code> to store changes and
<code>'all</code> to store contents.  <code>#f</code> does not set this option, so the
default value from Knot is used.
</p>
</dd>
<dt><code>max-journal-usage</code> (default: <code>#f</code>)</dt>
<dd><p>The maximum size for the journal on disk.  <code>#f</code> does not set this option,
so the default value from Knot is used.
</p>
</dd>
<dt><code>max-journal-depth</code> (default: <code>#f</code>)</dt>
<dd><p>The maximum size of the history.  <code>#f</code> does not set this option, so the
default value from Knot is used.
</p>
</dd>
<dt><code>max-zone-size</code> (default: <code>#f</code>)</dt>
<dd><p>The maximum size of the zone file.  This limit is enforced for incoming
transfer and updates.  <code>#f</code> does not set this option, so the default
value from Knot is used.
</p>
</dd>
<dt><code>dnssec-policy</code> (default: <code>#f</code>)</dt>
<dd><p>A reference to a <code>knot-policy-configuration</code> record, or the special
name <code>"default"</code>.  If the value is <code>#f</code>, there is no dnssec signing
on this zone.
</p>
</dd>
<dt><code>serial-policy</code> (default: <code>'increment</code>)</dt>
<dd><p>A policy between <code>'increment</code> and <code>'unixtime</code>.
</p>
</dd>
</dl>
</dd></dl>

<dl>
<dt id="index-knot_002dconfiguration" class="symbol-definition"><span class="symbol-definition-category">Data Type: </span><span class="symbol-definition-prototype">knot-configuration </span></dt>
<dd><p>Data type representing the Knot configuration.
This type has the following parameters:
</p>
<dl compact="compact">
<dt><code>knot</code> (default: <code>knot</code>)</dt>
<dd><p>The Knot package.
</p>
</dd>
<dt><code>run-directory</code> (default: <code>"/var/run/knot"</code>)</dt>
<dd><p>The run directory.  This directory will be used for pid file and sockets.
</p>
</dd>
<dt><code>includes</code> (default: <code>'()</code>)</dt>
<dd><p>A list of strings or file-like objects denoting other files that must be
included at the top of the configuration file.
</p>
<span id="index-secrets_002c-Knot-service"></span>
<p>This can be used to manage secrets out-of-band.  For example, secret
keys may be stored in an out-of-band file not managed by Guix, and
thus not visible in <samp>/gnu/store</samp>&mdash;e.g., you could store secret
key configuration in <samp>/etc/knot/secrets.conf</samp> and add this file
to the <code>includes</code> list.
</p>
<p>One can generate a secret tsig key (for nsupdate and zone transfers with the
keymgr command from the knot package.  Note that the package is not automatically
installed by the service.  The following example shows how to generate a new
tsig key:
</p>
<div class="example">
<pre class="example">keymgr -t mysecret &gt; /etc/knot/secrets.conf
chmod 600 /etc/knot/secrets.conf
</pre></div>

<p>Also note that the generated key will be named <var>mysecret</var>, so it is the
name that needs to be used in the <var>key</var> field of the
<code>knot-acl-configuration</code> record and in other places that need to refer
to that key.
</p>
<p>It can also be used to add configuration not supported by this interface.
</p>
</dd>
<dt><code>listen-v4</code> (default: <code>"0.0.0.0"</code>)</dt>
<dd><p>An ip address on which to listen.
</p>
</dd>
<dt><code>listen-v6</code> (default: <code>"::"</code>)</dt>
<dd><p>An ip address on which to listen.
</p>
</dd>
<dt><code>listen-port</code> (default: <code>53</code>)</dt>
<dd><p>A port on which to listen.
</p>
</dd>
<dt><code>keys</code> (default: <code>'()</code>)</dt>
<dd><p>The list of knot-key-configuration used by this configuration.
</p>
</dd>
<dt><code>acls</code> (default: <code>'()</code>)</dt>
<dd><p>The list of knot-acl-configuration used by this configuration.
</p>
</dd>
<dt><code>remotes</code> (default: <code>'()</code>)</dt>
<dd><p>The list of knot-remote-configuration used by this configuration.
</p>
</dd>
<dt><code>zones</code> (default: <code>'()</code>)</dt>
<dd><p>The list of knot-zone-configuration used by this configuration.
</p>
</dd>
</dl>
</dd></dl>

<span id="Knot-Resolver-Service"></span><h4 class="subsubheading">Knot Resolver Service</h4>

<dl>
<dt id="index-knot_002dresolver_002dservice_002dtype" class="symbol-definition"><span class="symbol-definition-category">Scheme Variable: </span><span class="symbol-definition-prototype">knot-resolver-service-type </span></dt>
<dd><p>This is the type of the knot resolver service, whose value should be
an <code>knot-resolver-configuration</code> object as in this example:
</p>
<div class="lisp">
<pre class="lisp"><span class="syntax-paren0">(<span class="syntax-symbol"><a class="syntax-symbol" href="Service-Reference.html#index-service">service</a> <a class="syntax-symbol" href="DNS-Services.html#index-knot_002dresolver_002dservice_002dtype">knot-resolver-service-type</a>
         <span class="syntax-paren1">(<span class="syntax-symbol"><a class="syntax-symbol" href="DNS-Services.html#index-knot_002dresolver_002dconfiguration">knot-resolver-configuration</a>
           <span class="syntax-paren2">(<span class="syntax-symbol"><span class="syntax-symbol">kresd-config-file</span> <span class="syntax-paren3">(<span class="syntax-symbol"><a class="syntax-symbol" href="G_002dExpressions.html#index-plain_002dfile">plain-file</a> <span class="syntax-string">"kresd.conf"</span> <span class="syntax-string">"
net.listen('192.168.0.1', 5353)
user('knot-resolver', 'knot-resolver')
modules = { 'hints &gt; iterate', 'stats', 'predict' }
cache.size = 100 * MB
"</span></span>)</span></span>)</span></span>)</span></span>)</span>
</pre></div>

<p>For more information, refer its <a href="https://knot-resolver.readthedocs.org/en/stable/daemon.html#configuration">manual</a>.
</p></dd></dl>

<dl>
<dt id="index-knot_002dresolver_002dconfiguration" class="symbol-definition"><span class="symbol-definition-category">Data Type: </span><span class="symbol-definition-prototype">knot-resolver-configuration </span></dt>
<dd><p>Data type representing the configuration of knot-resolver.
</p>
<dl compact="compact">
<dt><code>package</code> (default: <var>knot-resolver</var>)</dt>
<dd><p>Package object of the knot DNS resolver.
</p>
</dd>
<dt><code>kresd-config-file</code> (default: %kresd.conf)</dt>
<dd><p>File-like object of the kresd configuration file to use, by default it
will listen on <code>127.0.0.1</code> and <code>::1</code>.
</p>
</dd>
<dt><code>garbage-collection-interval</code> (default: 1000)</dt>
<dd><p>Number of milliseconds for <code>kres-cache-gc</code> to periodically trim the cache.
</p>
</dd>
</dl>
</dd></dl>


<span id="Dnsmasq-Service"></span><h4 class="subsubheading">Dnsmasq Service</h4>

<dl>
<dt id="index-dnsmasq_002dservice_002dtype" class="symbol-definition"><span class="symbol-definition-category">Scheme Variable: </span><span class="symbol-definition-prototype">dnsmasq-service-type </span></dt>
<dd><p>This is the type of the dnsmasq service, whose value should be an
<code>dnsmasq-configuration</code> object as in this example:
</p>
<div class="lisp">
<pre class="lisp"><span class="syntax-paren0">(<span class="syntax-symbol"><a class="syntax-symbol" href="Service-Reference.html#index-service">service</a> <a class="syntax-symbol" href="DNS-Services.html#index-dnsmasq_002dservice_002dtype">dnsmasq-service-type</a>
         <span class="syntax-paren1">(<span class="syntax-symbol"><a class="syntax-symbol" href="DNS-Services.html#index-dnsmasq_002dconfiguration">dnsmasq-configuration</a>
           <span class="syntax-paren2">(<span class="syntax-symbol"><span class="syntax-symbol">no-resolv?</span> <span class="syntax-symbol">#t</span></span>)</span>
           <span class="syntax-paren2">(<span class="syntax-symbol"><span class="syntax-symbol">servers</span> <span class="syntax-symbol">'</span><span class="syntax-paren3">(<span class="syntax-symbol"><span class="syntax-string">"192.168.1.1"</span></span>)</span></span>)</span></span>)</span></span>)</span>
</pre></div>
</dd></dl>

<dl>
<dt id="index-dnsmasq_002dconfiguration" class="symbol-definition"><span class="symbol-definition-category">Data Type: </span><span class="symbol-definition-prototype">dnsmasq-configuration </span></dt>
<dd><p>Data type representing the configuration of dnsmasq.
</p>
<dl compact="compact">
<dt><code>package</code> (default: <var>dnsmasq</var>)</dt>
<dd><p>Package object of the dnsmasq server.
</p>
</dd>
<dt><code>no-hosts?</code> (default: <code>#f</code>)</dt>
<dd><p>When true, don&rsquo;t read the hostnames in /etc/hosts.
</p>
</dd>
<dt><code>port</code> (default: <code>53</code>)</dt>
<dd><p>The port to listen on.  Setting this to zero completely disables DNS
responses, leaving only DHCP and/or TFTP functions.
</p>
</dd>
<dt><code>local-service?</code> (default: <code>#t</code>)</dt>
<dd><p>Accept DNS queries only from hosts whose address is on a local subnet,
ie a subnet for which an interface exists on the server.
</p>
</dd>
<dt><code>listen-addresses</code> (default: <code>'()</code>)</dt>
<dd><p>Listen on the given IP addresses.
</p>
</dd>
<dt><code>resolv-file</code> (default: <code>"/etc/resolv.conf"</code>)</dt>
<dd><p>The file to read the IP address of the upstream nameservers from.
</p>
</dd>
<dt><code>no-resolv?</code> (default: <code>#f</code>)</dt>
<dd><p>When true, don&rsquo;t read <var>resolv-file</var>.
</p>
</dd>
<dt><code>forward-private-reverse-lookup?</code> (default: <code>#t</code>)</dt>
<dd><p>When false, all reverse lookups for private IP ranges are answered with
"no such domain" rather than being forwarded upstream.
</p>
</dd>
<dt><code>query-servers-in-order?</code> (default: <code>#f</code>)</dt>
<dd><p>When true, dnsmasq queries the servers in the same order as they appear
in <var>servers</var>.
</p>
</dd>
<dt><code>servers</code> (default: <code>'()</code>)</dt>
<dd><p>Specify IP address of upstream servers directly.
</p>
</dd>
<dt><code>addresses</code> (default: <code>'()</code>)</dt>
<dd><p>For each entry, specify an IP address to return for any host in the
given domains.  Queries in the domains are never forwarded and always
replied to with the specified IP address.
</p>
<p>This is useful for redirecting hosts locally, for example:
</p>
<div class="lisp">
<pre class="lisp"><span class="syntax-paren0">(<span class="syntax-symbol"><a class="syntax-symbol" href="Service-Reference.html#index-service">service</a> <a class="syntax-symbol" href="DNS-Services.html#index-dnsmasq_002dservice_002dtype">dnsmasq-service-type</a>
         <span class="syntax-paren1">(<span class="syntax-symbol"><a class="syntax-symbol" href="DNS-Services.html#index-dnsmasq_002dconfiguration">dnsmasq-configuration</a>
           <span class="syntax-paren2">(<span class="syntax-symbol"><span class="syntax-symbol">addresses</span>
             <span class="syntax-symbol">'</span><span class="syntax-paren3">(<span class="syntax-symbol"><span class="syntax-comment">; Redirect to a local web-server.
</span>               <span class="syntax-string">"/example.org/127.0.0.1"</span>
               <span class="syntax-comment">; Redirect subdomain to a specific IP.
</span>               <span class="syntax-string">"/subdomain.example.org/192.168.1.42"</span></span>)</span></span>)</span></span>)</span></span>)</span>
</pre></div>

<p>Note that rules in <samp>/etc/hosts</samp> take precedence over this.
</p>
</dd>
<dt><code>cache-size</code> (default: <code>150</code>)</dt>
<dd><p>Set the size of dnsmasq&rsquo;s cache.  Setting the cache size to zero
disables caching.
</p>
</dd>
<dt><code>negative-cache?</code> (default: <code>#t</code>)</dt>
<dd><p>When false, disable negative caching.
</p>
</dd>
<dt><code>cpe-id</code> (default: <code>#f</code>)</dt>
<dd><p>If set, add a CPE (Customer-Premises Equipment) identifier to DNS
queries which are forwarded upstream.
</p>
</dd>
<dt><code>tftp-enable?</code> (default: <code>#f</code>)</dt>
<dd><p>Whether to enable the built-in TFTP server.
</p>
</dd>
<dt><code>tftp-no-fail?</code> (default: <code>#f</code>)</dt>
<dd><p>If true, does not fail dnsmasq if the TFTP server could not start up.
</p>
</dd>
<dt><code>tftp-single-port?</code> (default: <code>#f</code>)</dt>
<dd><p>Whether to use only one single port for TFTP.
</p>
</dd>
<dt><code>tftp-secure?</code> (default: <code>#f</code>)</dt>
<dd><p>If true, only files owned by the user running the dnsmasq process are accessible.
</p>
<p>If dnsmasq is being run as root, different rules apply:
<code>tftp-secure?</code> has no effect, but only files which have the
world-readable bit set are accessible.
</p>
</dd>
<dt><code>tftp-max</code> (default: <code>#f</code>)</dt>
<dd><p>If set, sets the maximal number of concurrent connections allowed.
</p>
</dd>
<dt><code>tftp-mtu</code> (default: <code>#f</code>)</dt>
<dd><p>If set, sets the MTU for TFTP packets to that value.
</p>
</dd>
<dt><code>tftp-no-blocksize?</code> (default: <code>#f</code>)</dt>
<dd><p>If true, stops the TFTP server from negotiating the blocksize with a client.
</p>
</dd>
<dt><code>tftp-lowercase?</code> (default: <code>#f</code>)</dt>
<dd><p>Whether to convert all filenames in TFTP requests to lowercase.
</p>
</dd>
<dt><code>tftp-port-range</code> (default: <code>#f</code>)</dt>
<dd><p>If set, fixes the dynamical ports (one per client) to the given range
(<code>"&lt;start&gt;,&lt;end&gt;"</code>).
</p>
</dd>
<dt><code>tftp-root</code> (default: <code>/var/empty,lo</code>)</dt>
<dd><p>Look for files to transfer using TFTP relative to the given directory.
When this is set, TFTP paths which include &lsquo;<samp>..</samp>&rsquo; are rejected, to stop clients
getting outside the specified root.  Absolute paths (starting with &lsquo;<samp>/</samp>&rsquo;) are
allowed, but they must be within the TFTP-root.  If the optional interface
argument is given, the directory is only used for TFTP requests via that
interface.
</p>
</dd>
<dt><code>tftp-unique-root</code> (default: <code>#f</code>)</dt>
<dd><p>If set, add the IP or hardware address of the TFTP client as a path component
on the end of the TFTP-root.  Only valid if a TFTP root is set and the
directory exists.  Defaults to adding IP address (in standard dotted-quad
format).
</p>
<p>For instance, if <samp>--tftp-root</samp> is &lsquo;<samp>/tftp</samp>&rsquo; and client
&lsquo;<samp>1.2.3.4</samp>&rsquo; requests file <samp>myfile</samp> then the effective path will
be <samp>/tftp/1.2.3.4/myfile</samp> if <samp>/tftp/1.2.3.4</samp> exists or
<samp>/tftp/myfile</samp> otherwise.  When &lsquo;<samp>=mac</samp>&rsquo; is specified it will
append the MAC address instead, using lowercase zero padded digits
separated by dashes, e.g.: &lsquo;<samp>01-02-03-04-aa-bb</samp>&rsquo;.  Note that
resolving MAC addresses is only possible if the client is in the local
network or obtained a DHCP lease from dnsmasq.
</p>
</dd>
</dl>
</dd></dl>

<span id="ddclient-Service"></span><h4 class="subsubheading">ddclient Service</h4>

<span id="index-ddclient"></span>
<p>The ddclient service described below runs the ddclient daemon, which takes
care of automatically updating DNS entries for service providers such as
<a href="https://dyn.com/dns/">Dyn</a>.
</p>
<p>The following example show instantiates the service with its default
configuration:
</p>
<div class="lisp">
<pre class="lisp"><span class="syntax-paren0">(<span class="syntax-symbol"><a class="syntax-symbol" href="Service-Reference.html#index-service">service</a> <span class="syntax-symbol">ddclient-service-type</span></span>)</span>
</pre></div>

<p>Note that ddclient needs to access credentials that are stored in a
<em>secret file</em>, by default <samp>/etc/ddclient/secrets</samp> (see
<code>secret-file</code> below).  You are expected to create this file manually, in
an &ldquo;out-of-band&rdquo; fashion (you <em>could</em> make this file part of the
service configuration, for instance by using <code>plain-file</code>, but it will be
world-readable <i>via</i> <samp>/gnu/store</samp>).  See the examples in the
<samp>share/ddclient</samp> directory of the <code>ddclient</code> package.
</p>

<p>Available <code>ddclient-configuration</code> fields are:
</p>
<dl>
<dt id="index-ddclient-1" class="symbol-definition"><span class="symbol-definition-category"><code>ddclient-configuration</code> parameter: <em>package</em> </span><span class="symbol-definition-prototype">ddclient </span></dt>
<dd><p>The ddclient package.
</p>
</dd></dl>

<dl>
<dt id="index-daemon-1" class="symbol-definition"><span class="symbol-definition-category"><code>ddclient-configuration</code> parameter: <em>integer</em> </span><span class="symbol-definition-prototype">daemon </span></dt>
<dd><p>The period after which ddclient will retry to check IP and domain name.
</p>
<p>Defaults to &lsquo;<samp>300</samp>&rsquo;.
</p>
</dd></dl>

<dl>
<dt id="index-syslog-2" class="symbol-definition"><span class="symbol-definition-category"><code>ddclient-configuration</code> parameter: <em>boolean</em> </span><span class="symbol-definition-prototype">syslog </span></dt>
<dd><p>Use syslog for the output.
</p>
<p>Defaults to &lsquo;<samp>#t</samp>&rsquo;.
</p>
</dd></dl>

<dl>
<dt id="index-mail-1" class="symbol-definition"><span class="symbol-definition-category"><code>ddclient-configuration</code> parameter: <em>string</em> </span><span class="symbol-definition-prototype">mail </span></dt>
<dd><p>Mail to user.
</p>
<p>Defaults to &lsquo;<samp>"root"</samp>&rsquo;.
</p>
</dd></dl>

<dl>
<dt id="index-mail_002dfailure" class="symbol-definition"><span class="symbol-definition-category"><code>ddclient-configuration</code> parameter: <em>string</em> </span><span class="symbol-definition-prototype">mail-failure </span></dt>
<dd><p>Mail failed update to user.
</p>
<p>Defaults to &lsquo;<samp>"root"</samp>&rsquo;.
</p>
</dd></dl>

<dl>
<dt id="index-pid" class="symbol-definition"><span class="symbol-definition-category"><code>ddclient-configuration</code> parameter: <em>string</em> </span><span class="symbol-definition-prototype">pid </span></dt>
<dd><p>The ddclient PID file.
</p>
<p>Defaults to &lsquo;<samp>"/var/run/ddclient/ddclient.pid"</samp>&rsquo;.
</p>
</dd></dl>

<dl>
<dt id="index-ssl-2" class="symbol-definition"><span class="symbol-definition-category"><code>ddclient-configuration</code> parameter: <em>boolean</em> </span><span class="symbol-definition-prototype">ssl </span></dt>
<dd><p>Enable SSL support.
</p>
<p>Defaults to &lsquo;<samp>#t</samp>&rsquo;.
</p>
</dd></dl>

<dl>
<dt id="index-user-4" class="symbol-definition"><span class="symbol-definition-category"><code>ddclient-configuration</code> parameter: <em>string</em> </span><span class="symbol-definition-prototype">user </span></dt>
<dd><p>Specifies the user name or ID that is used when running ddclient
program.
</p>
<p>Defaults to &lsquo;<samp>"ddclient"</samp>&rsquo;.
</p>
</dd></dl>

<dl>
<dt id="index-group-4" class="symbol-definition"><span class="symbol-definition-category"><code>ddclient-configuration</code> parameter: <em>string</em> </span><span class="symbol-definition-prototype">group </span></dt>
<dd><p>Group of the user who will run the ddclient program.
</p>
<p>Defaults to &lsquo;<samp>"ddclient"</samp>&rsquo;.
</p>
</dd></dl>

<dl>
<dt id="index-secret_002dfile" class="symbol-definition"><span class="symbol-definition-category"><code>ddclient-configuration</code> parameter: <em>string</em> </span><span class="symbol-definition-prototype">secret-file </span></dt>
<dd><p>Secret file which will be appended to <samp>ddclient.conf</samp> file.  This
file contains credentials for use by ddclient.  You are expected to
create it manually.
</p>
<p>Defaults to &lsquo;<samp>"/etc/ddclient/secrets.conf"</samp>&rsquo;.
</p>
</dd></dl>

<dl>
<dt id="index-extra_002doptions" class="symbol-definition"><span class="symbol-definition-category"><code>ddclient-configuration</code> parameter: <em>list</em> </span><span class="symbol-definition-prototype">extra-options </span></dt>
<dd><p>Extra options will be appended to <samp>ddclient.conf</samp> file.
</p>
<p>Defaults to &lsquo;<samp>()</samp>&rsquo;.
</p>
</dd></dl>



<hr />
<div class="header">
<p>
Next: <a href="VNC-Services.html" accesskey="n" rel="next">VNC Services</a>, Previous: <a href="Certificate-Services.html" accesskey="p" rel="prev">Certificate Services</a>, Up: <a href="Services.html" accesskey="u" rel="up">Services</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
